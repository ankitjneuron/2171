/*
 baya 2015-12-16 
*/
function ApiInterceptor(a,b,c){return{request:function(b){return b||a.when(b)},requestError:function(b){return a.reject(b)},response:function(b){return b||a.when(b)},responseError:function(d){return(401===d.status||"Invalid access token"===d.data.message)&&(b.userLogOut(),c.removeLocalStorage("userInfo"),c.removeLocalStorage("myBusiness")),a.reject(d)}}}angular.module("bayaApp",["ui.router","ngStorage","ngResource","ui.bootstrap","duScroll","angularjs-dropdown-multiselect","ngBootbox","uiSwitch","validatorApp","ngCkeditor","angular-svg-round-progress"]),window.baseUrl=window.location.protocol+"//"+window.location.host+"/";var lang="en";!function(){"use strict";angular.module("bayaApp").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){b.otherwise("/"),a.state("root",{url:"",views:{header:{templateUrl:"partials/home/header.html"},content:{templateUrl:"partials/home/home.html",controller:"BaseController"},footer:{templateUrl:"partials/home/footer.html"}},data:{isAuthenticate:!1,adminAuthenticate:!0}}).state("root.for-doctor",{url:"/for-doctor",views:{"content@":{templateUrl:"partials/home/for-doctor.html",controller:"BaseController"}},data:{isAuthenticate:!1}}).state("root.home",{url:"/",views:{"content@":{templateUrl:"partials/home/home.html",controller:"BaseController"}},data:{isAuthenticate:!1}}).state("root.index",{url:"/home",views:{"content@":{templateUrl:"partials/home/home.html",controller:"BaseController"}},data:{isAuthenticate:!1}}).state("root.booking",{url:"/booking",views:{"content@":{templateUrl:"partials/home/booking.html",controller:"BaseController"}},data:{isAuthenticate:!1}}).state("root.login",{url:"/login",views:{"content@":{templateUrl:"partials/auth/login.html",controller:"AuthController"}},data:{isAuthenticate:!1,isStaticPage:!0}}).state("root.verifylogin",{url:"/login/:status",views:{"content@":{templateUrl:"partials/auth/login.html",controller:"AuthController"}},data:{isAuthenticate:!1,isStaticPage:!0}}).state("root.forgotpassword",{url:"/forgot-password",views:{"content@":{templateUrl:"partials/auth/forgot-password.html",controller:"AuthController"}},data:{isAuthenticate:!1,isStaticPage:!0}}).state("root.resetpassword",{url:"/reset-password/:id",views:{"content@":{templateUrl:"partials/auth/reset-password.html",controller:"AuthController"}},data:{isAuthenticate:!1,isStaticPage:!0}}).state("root.signup",{url:"/signup",views:{"content@":{templateUrl:"partials/auth/signup.html",controller:"AuthController"}},data:{isAuthenticate:!1,isStaticPage:!0}}).state("root.listing",{url:"/listing",views:{"content@":{templateUrl:"partials/site/listing.html",controller:"SiteController"}},data:{loginUserType:"business_user"}}).state("root.doctordetails",{url:"/doctor-details/:id",views:{"content@":{templateUrl:"partials/site/doctor-details.html",controller:"SiteController"}},data:{}}).state("root.pagedetail",{url:"/page/:slug",views:{"content@":{templateUrl:"partials/site/page.html",controller:"SiteController"}},data:{}}).state("login",{url:"/admin",views:{"content@":{templateUrl:"partials/auth/admin-login.html",controller:"AuthController"}},data:{isAuthenticate:!1,isStaticPage:!0}}).state("admin",{url:"",views:{"@subheader":{templateUrl:"partials/admin/include/subheader.html"},"@left":{templateUrl:"partials/admin/include/left.html"}},data:{isAuthenticate:!1,loginUserType:"admin"}}).state("admin.dashboard",{url:"/admin/dashboard",views:{"content@":{templateUrl:"partials/admin/dashboard.html",controller:"AdminDashboardController"}},data:{isAuthenticate:!0}}).state("admin.listing",{url:"/admin/listing",views:{"content@":{templateUrl:"partials/admin/listing.html",controller:"ListingController"}},data:{isAuthenticate:!0}}).state("admin.addlisting",{url:"/admin/add-listing",views:{"content@":{templateUrl:"partials/admin/add-listing.html",controller:"ListingController"}},data:{isAuthenticate:!0}}).state("admin.updatelisting",{url:"/admin/update-listing/:id",views:{"content@":{templateUrl:"partials/admin/add-listing.html",controller:"ListingController"}},data:{isAuthenticate:!0}}).state("admin.businesspages",{url:"/admin/business-pages",views:{"content@":{templateUrl:"partials/admin/business-pages.html",controller:"BusinessUserController"}},data:{isAuthenticate:!0}}).state("admin.businessview",{url:"/admin/business-view/:id",views:{"content@":{templateUrl:"partials/admin/business-view.html",controller:"BusinessUserController"}},data:{isAuthenticate:!0}}).state("admin.category",{url:"/admin/category",views:{"content@":{templateUrl:"partials/admin/category.html",controller:"CategoryController"}},data:{isAuthenticate:!0}}).state("admin.addcategory",{url:"/admin/add-category",views:{"content@":{templateUrl:"partials/admin/add-category.html",controller:"CategoryController"}},data:{isAuthenticate:!0}}).state("admin.editcategory",{url:"/admin/edit-category/:id",views:{"content@":{templateUrl:"partials/admin/add-category.html",controller:"CategoryController"}},data:{isAuthenticate:!0}}).state("admin.users",{url:"/admin/users",views:{"content@":{templateUrl:"partials/admin/users.html",controller:"UsersController"}},data:{isAuthenticate:!0}}).state("admin.business",{url:"/admin/business",views:{"content@":{templateUrl:"partials/admin/business.html"}},data:{isAuthenticate:!0}}).state("admin.staticpages",{url:"/admin/staticpages",views:{"content@":{templateUrl:"partials/admin/static-pages.html"}},data:{isAuthenticate:!0}}).state("admin.changepassword",{url:"/admin/change-password",views:{"content@":{templateUrl:"partials/admin/change-password.html",controller:"AdminProfileController"}},data:{isAuthenticate:!0}}).state("admin.adminprofile",{url:"/admin/admin-profile",views:{"content@":{templateUrl:"partials/admin/admin-profile.html",controller:"AdminProfileController"}},data:{isAuthenticate:!0}}).state("admin.claimlisting",{url:"/admin/claim-listing/:id",views:{"content@":{templateUrl:"partials/admin/claim-listing.html",controller:"ListingController"}},data:{isAuthenticate:!0}}).state("admin.cmspage",{url:"/admin/cms",views:{"content@":{templateUrl:"partials/admin/cms.html",controller:"CmsController"}},data:{isAuthenticate:!0}}).state("admin.updatecmspage",{url:"/admin/update-page/:id",views:{"content@":{templateUrl:"partials/admin/add-cms-page.html",controller:"CmsController"}},data:{isAuthenticate:!0}}).state("admin.addimage",{url:"/admin/add-image",views:{"content@":{templateUrl:"partials/admin/add-image.html",controller:"CmsController"}},data:{isAuthenticate:!0}}).state("user",{url:"",views:{header:{templateUrl:"partials/user/include/header.html"},footer:{templateUrl:"partials/user/include/footer.html"},"@subheader":{templateUrl:"partials/user/include/subheader.html"},"@left":{templateUrl:"partials/user/include/left.html"}},data:{isAuthenticate:!0,loginUserType:"business_user"}}).state("user.businessinfo",{url:"/user/business-info",views:{"content@":{templateUrl:"partials/user/business-info.html",controller:"ManageListingController"}},data:{isAuthenticate:!0}}).state("user.doctorlist",{url:"/user/doctor-list",views:{"content@":{templateUrl:"partials/user/doctor-list.html",controller:"ManageDoctorsController"}},data:{isAuthenticate:!0}}).state("user.adddoctor",{url:"/user/add-doctor",views:{"content@":{templateUrl:"partials/user/add-doctor.html",controller:"ManageDoctorsController"}},data:{isAuthenticate:!0}}).state("user.updatedoctor",{url:"/user/update-doctor/:id",views:{"content@":{templateUrl:"partials/user/add-doctor.html",controller:"ManageDoctorsController"}},data:{isAuthenticate:!0}}).state("user.editbusinessinfo",{url:"/user/edit-business",views:{"content@":{templateUrl:"partials/user/edit-business.html",controller:"ManageListingController"}},data:{isAuthenticate:!0}}).state("user.managelisting",{url:"/user/manage-listing",views:{"content@":{templateUrl:"partials/user/manage-listing.html",controller:"ManageListingController"}},data:{isAuthenticate:!0}}).state("user.businesshour",{url:"/user/business-hour",views:{"content@":{templateUrl:"partials/user/business-hour.html",controller:"BusinessHourController"}},data:{isAuthenticate:!0}}).state("user.calendar",{url:"/user/calendar",views:{"content@":{templateUrl:"partials/user/user-calendar.html",controller:"UserCalendarController"}},data:{isAuthenticate:!0}}).state("user.dashboard",{url:"/user/dashboard",views:{"content@":{templateUrl:"partials/user/user-dashboard.html",controller:"UserDashboardController"}},data:{isAuthenticate:!0}}).state("user.changepassword",{url:"/user/change-password",views:{"content@":{templateUrl:"partials/user/change-password.html",controller:"UserProfileController"}},data:{isAuthenticate:!0}}).state("user.userprofile",{url:"/user/profile",views:{"content@":{templateUrl:"partials/user/user-profile.html",controller:"UserProfileController"}},data:{isAuthenticate:!0}}).state("user.userreport",{url:"/user/report",views:{"content@":{templateUrl:"partials/user/report.html",controller:"AppointmentReportController"}},data:{isAuthenticate:!0}}),c.interceptors.push("ApiInterceptor")}]),angular.module("bayaApp").run(["$rootScope","$state","UtilityService",function(a,b,c){var d;a.$on("$stateChangeStart",function(a,e){if(!c.checkUserLogin()&&e.data.isAuthenticate)a.preventDefault(),b.go("root.home");else{c.checkUserLogin()&&(d=c.getUserInfo(),e.data.hasOwnProperty("loginUserType")&&e.data.loginUserType!==d.user_type&&(a.preventDefault(),"business_user"===e.data.loginUserType?b.go("admin.dashboard"):b.go("root.home")));var f=e.data.isStaticPage?!0:!1;c.checkUserLogin()&&!e.data.isAuthenticate&&f&&(d=c.getUserInfo(),"admin"===d.user_type&&(a.preventDefault(),b.go("admin.dashboard")),"business_user"===d.user_type&&(a.preventDefault(),b.go("user.dashboard")));var g=e.data.adminAuthenticate?!0:!1;c.checkUserLogin()&&g&&(d=c.getUserInfo(),"admin"===d.user_type&&(a.preventDefault(),b.go("admin.dashboard")))}})}]),angular.module("bayaApp").directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(a,b,c,d){a.$watch(function(){var b;return(a.passwordVerify||d.$viewValue)&&(b=a.passwordVerify+"_"+d.$viewValue),b},function(b){b&&d.$parsers.unshift(function(b){var c=a.passwordVerify;return c!==b?void d.$setValidity("passwordVerify",!1):(d.$setValidity("passwordVerify",!0),b)})})}}})}(),!function(){"use strict";angular.module("bayaApp").directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]),angular.module("bayaApp").directive("ngCompare",function(){var a;return{require:"ngModel",link:function(b,c,d,e){var f=document.getElementsByName(d.ngCompare)[0];a=angular.element(f),c.on("keyup",function(){if(""!==a.val()){var d=c.val()===a.val();e.$setValidity("compare",d),b.$digest()}}),a.on("keyup",function(){if(""!==c.val()){var d=c.val()===a.val();e.$setValidity("compare",d),b.$digest()}})}}}),angular.module("bayaApp").filter("capitalize",function(){return function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}}),angular.module("bayaApp").filter("to_trusted",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}])}(),angular.module("bayaApp").factory("ApiInterceptor",["$q","$rootScope","UtilityService",ApiInterceptor]),function(){angular.module("validatorApp",["validation","validation.rule"]).config(["$validationProvider",function(a){a.showSuccessMessage=!1,a.setExpression({checkStates:function(a,b,c,d,e){return a.length>0?!0:!1}}).setDefaultMsg({checkStates:{error:"State is required.",success:"Thanks!"}}),a.setExpression({checkAnyServiceIsSelected:function(a,b,c,d,e){return a>0?!0:!1}}).setDefaultMsg({checkAnyServiceIsSelected:{error:"Please select at least one.",success:"Thanks!"}}),a.setExpression({checkUserType:function(a,b,c,d,e){return"broker"===a||"seller"===a?!0:!1}}).setDefaultMsg({checkUserType:{error:"User type is required.",success:"Thanks!"}}),a.setExpression({checkPasswordLength:function(a,b,c,d,e){return a=a.trim(),""===a?!0:a.length>0&&(a.length<6||a.length>15)?!1:!0}}).setDefaultMsg({checkPasswordLength:{error:"Password length should be between 6 to 15 characters.",success:"Thanks!"}}),a.setExpression({comparePassword:function(a,b,c,d,e){var f=$("#"+e).val();f=f.trim();var g=a.trim();return f===g?!0:!1}}).setDefaultMsg({comparePassword:{error:"Password does not match.",success:"Thanks!"}})}])}.call(this),angular.module("bayaApp").factory("CommonUtility",function(){return{getBusinessHours:function(){return[{id:"12:00",label:"12:00"},{id:"01:00",label:"01:00"},{id:"02:00",label:"02:00"},{id:"03:00",label:"03:00"},{id:"04:00",label:"04:00"},{id:"05:00",label:"05:00"},{id:"06:00",label:"06:00"},{id:"07:00",label:"07:00"},{id:"08:00",label:"08:00"},{id:"09:00",label:"09:00"},{id:"10:00",label:"10:00"},{id:"11:00",label:"11:00"}]},getReportStatus:function(){return[{id:"pending",label:"Pending"},{id:"accepted",label:"Accepted"},{id:"rejected",label:"Rejected"},{id:"visited",label:"Visited"},{id:"missed",label:"Missed"},{id:"cancelled",label:"Cancelled"}]}}}),!function(){"use strict";angular.module("bayaApp").controller("BaseController",["$scope","$state","$location","$rootScope","UtilityService","AuthService",function(a,b,c,d,e,f){var g=e.getUserInfo();a.defaultProfileImage="default-profileimage.jpg",a.profileImage=baseUrl+"images/"+a.defaultProfileImage,a.userType="",a.userDashboardDetail=[],a.business_name="",a.businessAppointment=[],a.myBusinessInfo={},a.hideTab=!0,a.logout=function(d){e.checkUserLogin()?f.logout(e.getUserAccessToken(),function(c){c.success?(a.showBeforeLoginHeader=!1,a.showAfterLoginHeader=!1,e.removeLocalStorage("userInfo"),e.removeLocalStorage("myBusiness"),"admin"===d?b.go("login"):"user"===d?b.go("root.login"):b.go("root.login")):e.showToast("error",Message.getErrorMessage("logout"))},function(a){e.showToast("error",Message.getErrorMessage("logout"))}):c.path("/")},d.userLogOut=function(){a.logout()},d.setUserInfo=function(){g=e.getUserInfo(),g.hasOwnProperty("image")?e.isImageExist("uploads/profile/"+g.image).then(function(b){b?a.profileImage=baseUrl+"uploads/profile/"+g.image:a.profileImage=baseUrl+"images/default-profileimage.jpg"}):a.profileImage=baseUrl+"images/default-profileimage.jpg",g.hasOwnProperty("first_name")&&(a.userName=g.first_name),g.hasOwnProperty("last_name")&&(a.userName+=" "+g.last_name),g?(a.userType=g.user_type,a.showBeforeLoginHeader=!0,a.showAfterLoginHeader=!0):(a.showBeforeLoginHeader=!1,a.showAfterLoginHeader=!1)},a.getUserDashboardDetail=function(){a.claimProfile=!1,a.pendingClaimProfile=!1,a.confirmClaimProfile=!1,a.hideTab=!0,a.businessAppointment=[],f.getUserDashboardDetail({},function(b){if(b.success)if(e.setLocalStorage("myBusiness",b.data.my_listing),a.myBusinessInfo=b.data.my_listing,a.current=b.data.profile_percentage.percentVal,a.max=b.data.profile_percentage.total,a.percentage=b.data.profile_percentage.percent,a.businessAppointment=b.data.pending_appointment,b.data.my_listing)if(b.data.my_listing_claim){var c=b.data.my_listing_claim;a.hideTab="accepted"===c.status&&c.user_id===g._id?!1:!0,"pending"===c.status&&c.user_id===g._id&&(a.claimProfile=!1,a.pendingClaimProfile=!0,a.confirmClaimProfile=!1),"accepted"===c.status&&c.user_id===g._id&&(a.claimProfile=!1,a.pendingClaimProfile=!1,a.confirmClaimProfile=!0,a.business_name=b.data.my_listing.business_name)}else a.claimProfile=!0;else a.claimProfile=!0},function(a){})},"business_user"===g.user_type&&a.getUserDashboardDetail(),d.userDashboard=function(){a.getUserDashboardDetail()},a.$state=b,a.searchBusiness=function(){a.businessName=void 0===a.businessName||""===a.businessName?"":a.businessName,a.address=void 0===a.address||""===a.address?"":a.address,c.path("/listing").search("businessName",a.businessName).search("address",a.address)},d.checkMylisting=function(){void 0!==a.myBusinessInfo.my_listing_claim&&(a.hideTab="accepted"===a.myBusinessInfo.my_listing_claim.status&&a.myBusinessInfo.my_listing_claim.user_id===g._id?!1:!0)}}])}(),!function(){"use strict";angular.module("bayaApp").service("UtilityService",["$localStorage","$location","$q",function(a,b,c){this.setLocalStorage=function(b,c){a[b]=c},this.getLocalStorage=function(b){return a[b]?a[b]:!1},this.removeLocalStorage=function(b){delete a[b]},this.checkUserLogin=function(){return this.getLocalStorage("userInfo")?!0:!1},this.getUserInfo=function(){return this.getLocalStorage("userInfo")},this.showToast=function(a,b){toastr.options={closeButton:!0,positionClass:"toast-top-right",preventDuplicates:!0,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.remove(),toastr[a](b)},this.getUserAccessToken=function(){var a=!1;return this.getLocalStorage("userInfo")?(a=this.getLocalStorage("userInfo"),a.hasOwnProperty("access_token")?a.access_token:!1):!1},this.getLoginUserId=function(){var a=!1;return this.getLocalStorage("userInfo")?(a=this.getLocalStorage("userInfo"),a.hasOwnProperty("access_token")?a._id:""):""},this.getDate=function(a){a=new Date(a);var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return 9>=c&&(c="0"+c),9>=d&&(d="0"+d),c+"/"+d+"/"+b},this.convertDateObjToDate=function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return 9>=c&&(c="0"+c),9>=d&&(d="0"+d),b+"-"+c+"-"+d},this.isImageExist=function(a){a=baseUrl+a;var b=c.defer(),d=new Image;return d.onerror=function(){b.resolve(!1)},d.onload=function(){b.resolve(!0)},d.src=a,b.promise},this.getDateObj=function(a){a=a.split("-");var b=new Date(a[0],a[1]-1,a[2],0,0,0);return b},this.changeDateToTime=function(a,b){a=new Date(a);var c=a.getHours(),d=a.getMinutes(),e=1===(a.getMonth()+1).toString().length?"0"+(a.getMonth()+1):a.getMonth()+1,f=1===a.getDate().toString().length?"0"+a.getDate():a.getDate(),g="AM",h=c,i=d;return c=1===c.toString().length?"0"+c:c,i=1===i.toString().length?"0"+i:i,h>=12&&(h=c-12,g="PM"),0===h&&(h=12),1===h.toString().length&&(h="0"+h),1===d.toString().length&&(d="0"+d),b?a.getFullYear()+"-"+e+"-"+f+" "+c+":"+i+":00":h+":"+d+" "+g},this.getUtcDate=function(a){var b=a,c=parseInt(b.getMonth())+1;c=9>=c?"0"+c:c;var d=b.getDate();return d=9>=d?"0"+d:d,b=b.getFullYear()+"-"+c+"-"+d+"T00:00:00.000Z"}}])}(),!function(){"use strict";angular.module("bayaApp").controller("AuthController",["$scope","$state","$location","$rootScope","$stateParams","AuthService","UtilityService",function(a,b,c,d,e,f,g){a.loginFrom=f.loginForm,a.loginFrom.email="",a.loginFrom.password="",a.signupFrom=f.signupForm,a.signupFrom={},a.forgotPasswordForm=f.forgotPasswordForm,a.forgotPasswordForm.email="",a.resetFrom=f.resetPasswordForm,a.loader=!1,a.btnLoader=!1,a.btnDisable=!1,a.disableLoginSbmtBtn=!1,a.disableSendBtn=!1,angular.element("body").removeClass("modal-open"),angular.element(".modal-backdrop").remove(),"success"===e.status&&g.showToast("success",Message.getSuccessMessage("account_activate_success")),"failed"===e.status&&g.showToast("error",Message.getErrorMessage("account_activation_failed")),!a.showAfterLoginHeader||g.getUserInfo()&&void 0!==g.getUserInfo()&&""!==g.getUserInfo()||(angular.element(document.querySelector("#showBeforeLoginHeader")).removeClass("ng-hide"),angular.element(document.querySelector("#showAfterLoginHeader")).addClass("ng-hide")),a.login=function(){a.form.$valid&&(a.loader=!0,a.disableLoginSbmtBtn=!0,a.loginFrom.email=a.loginFrom.email.toLowerCase(),f.login(a.loginFrom,function(c){c.success===!0?"login"===b.current.name&&"admin"===c.data.user_type?(g.setLocalStorage("userInfo",c.data),b.go("admin.dashboard"),window.location.reload(),f.loginForm={}):"root.login"===b.current.name&&"business_user"===c.data.user_type?(g.setLocalStorage("userInfo",c.data),b.go("user.dashboard"),window.location.reload(),f.loginForm={}):g.showToast("error",Message.getErrorMessage("login")):g.showToast("error",c.message),a.loader=!1,a.disableLoginSbmtBtn=!1},function(b){a.loader=!1,a.disableLoginSbmtBtn=!1,g.showToast("error",b.message)}))},a.forgotPassword=function(){a.form.$valid&&(a.loader=!0,a.disableSendBtn=!0,a.forgotPasswordForm.user_type="business_user",a.forgotPasswordForm.email=a.forgotPasswordForm.email.toLowerCase(),f.forgotPassword(a.forgotPasswordForm,function(c){c.success===!0?(b.go("root.login"),f.forgotPasswordForm={},g.showToast("success",Message.getSuccessMessage("forgotpassword"))):g.showToast("error",c.message),a.loader=!1,a.disableSendBtn=!1},function(b){a.loader=!1,a.disableSendBtn=!1,g.showToast("error",b.message)}))},a.resetPassword=function(){a.form.$valid&&(a.resetFrom.token=e.id,a.resetFormBtnloader=!0,a.disableResetSbmtBtn=!0,f.resetPassword(a.resetFrom,function(c){c.success===!0?(b.go("root.login"),f.resetFrom={},g.showToast("success",Message.getSuccessMessage("reset_password"))):g.showToast("error",Message.getErrorMessage("session_expired")),a.resetFormBtnloader=!1,a.disableResetSbmtBtn=!1},function(b){a.resetFormBtnloader=!1,a.disableResetSbmtBtn=!1,g.showToast("error",Message.getErrorMessage("session_expired"))}))},"root.signup"===b.current.name&&(a.statesData=[],a.stateHdn="",a.statesText={buttonDefaultText:"Select State"},f.getStateList("",function(b){angular.forEach(b.data,function(b,c){a.statesData.push({id:b._id,label:b.state_name})})},function(a){g.showToast("error",a.message)}),a.stateEvent={onItemDeselect:function(b){a.signupForm.state=""},onItemSelect:function(b){a.signupFrom.state=b.id,a.stateHdn=b}},a.stateSettings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}}),a.signup=function(){if(a.form.$valid){a.btnLoader=!0,a.btnDisable=!0,a.signupFrom.user_type="business_user";var c=new google.maps.Geocoder;c.geocode({address:a.signupFrom.address+", "+a.signupFrom.address+", "+a.signupFrom.zipcode},function(c,d){if(d==google.maps.GeocoderStatus.OK){var e=c[0].geometry.location;void 0===e.lat()||""===e.lat()||void 0===e.lng()||""===e.lng()?(a.signupFrom.lattitude="0",a.signupFrom.longtitude="0"):(a.signupFrom.lattitude=e.lat(),a.signupFrom.longtitude=e.lng())}else a.signupFrom.lattitude="0",a.signupFrom.longtitude="0";a.signupFrom.email=a.signupFrom.email.toLowerCase(),f.signup(a.signupFrom,function(c){c.success?(b.go("root.login"),g.showToast("success",Message.getSuccessMessage("user_signup")),f.signupForm={}):g.showToast("error",c.message),a.btnLoader=!1,a.btnDisable=!1},function(b){g.showToast("error",b.message),a.btnLoader=!1,a.btnDisable=!1,g.showToast("error",b.message)})})}}}])}(),angular.module("bayaApp").service("AuthService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.loginForm={email:"",password:""},this.signupForm={user_type:"",first_name:"",last_name:"",email:"",password:"",phone_number:"",address:"",state:"",city:"",device_type:"",device_id:"",certification_type:"",lattitude:"",longtitude:""},this.forgotPasswordForm={email:""},this.resetPasswordForm={password:"",confirm_password:"",token:""},this.login=function(b,c,d){return a.post(baseUrl+"api/users/login",b).success(c).error(d)},this.getStateList=function(b,c,d){return a.get(baseUrl+"api/users/states").success(c).error(d)},this.signup=function(b,c,d){return a.post(baseUrl+"api/users/signup",b).success(c).error(d)},this.forgotPassword=function(b,c,d){return a.post(baseUrl+"api/users/forgot-password",b).success(c).error(d)},this.resetPassword=function(b,c,d){return a.post(baseUrl+"api/users/reset-password",b).success(c).error(d)},this.logout=function(b,c,d){return a.get(baseUrl+"api/users/logout",{headers:{"Access-Token":b}}).success(c).error(d)},this.getUserDashboardDetail=function(b,d,e){return a.get(baseUrl+"api/users/dashboard?access_token="+c).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("CategoryController",["$scope","$state","$location","$rootScope","$stateParams","$ngBootbox","CategoryService","UtilityService",function(a,b,c,d,e,f,g,h){a.category=g.categoryForm,a.category.category_name="",a.category.category_id="",a.category_icon_path="images/defult_icon.png",a.currentState=b.current.name,a.catagoryData=[],a.categoryCurrentPage=1,setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#categoryEdit")).addClass("active")},200),a.saveCategory=function(){""!==a.category.category_name?(a.categoryError=!1,a.categoryBtnDisable=!0,a.categoryBtnLoader=!0,a.category.category_icon=void 0!==a.categoryFile?a.categoryFile:"",g.category(a.category,function(c){c.success?(a.categoryFile="",h.showToast("success",void 0===a.category.category_id||""===a.category.category_id?Message.getSuccessMessage("category_success"):Message.getSuccessMessage("category_update")),a.category={},b.go("admin.category")):h.showToast("error",c.message),a.categoryBtnDisable=!1,a.categoryBtnLoader=!1},function(b){a.categoryBtnDisable=!1,a.categoryBtnLoader=!1,h.showToast("error",Message.getErrorMessage("api_error"))})):a.categoryError=!0},a.categoryList=function(){a.categoryListLoader=!0,a.categoryListPagination=!1,a.catagoryData=[],g.categoryList({page:a.categoryCurrentPage,category_name:a.searchCategory},function(b){b.success&&b.data.items.length>0?(a.noCategoryFound=!1,a.catagoryData=b.data.items,a.categoryMaxSize=b.data.page,a.categoryTotalItems=b.data.totalItems,a.categoryListPagination=b.data.page>1?!0:!1):a.noCategoryFound=!0,a.categoryListLoader=!1},function(b){a.categoryListLoader=!1})},"admin.category"===b.current.name&&a.categoryList(),a.editCategory=function(){g.categoryDetail({id:e.id},function(b){b.success&&(void 0!==b.data.category_icon&&""!==b.data.category_icon&&(a.category_icon_path="uploads/category/"+b.data.category_icon),a.category.category_name=b.data.category_name,a.category.category_id=b.data._id)},function(a){h.showToast("error",Message.getErrorMessage("api_error"))})},"admin.editcategory"===b.current.name&&a.editCategory(),a.fileClickEvent=function(){var a=document.getElementById("categoryIcon");setTimeout(function(){a.click()},200)},document.getElementById("categoryIcon").onchange=function(){a.categoryFile=this.value.split(".")[1],a.categoryFile=a.categoryFile.toLowerCase(),"gif"===a.categoryFile||"png"===a.categoryFile||"jpg"===a.categoryFile||"jpeg"===a.categoryFile?a.category_icon_path=URL.createObjectURL(this.files[0]):h.showToast("error",Message.getErrorMessage("invalid_file_formate"))},a.getDate=function(a){return h.getDate(a)},a.deleteCategory=function(b,c){f.hideAll(),f.customDialog({message:Message.getAlertMessage("category_delete"),className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){g.deleteCategory({id:b},function(b){b.success?(a.catagoryData.splice(c,1),0===a.catagoryData.length&&(a.noCategoryFound=!0),h.showToast("success",Message.getSuccessMessage("category_delete"))):h.showToast("error",Message.getErrorMessage("api_error"))},function(a){h.showToast("error",Message.getErrorMessage("api_error"))})}}}})},a.changeCategoryStatus=function(a,b){g.changeStatus({enabled:a?"active":"inactive",id:b},function(a){a.success?h.showToast("success",Message.getSuccessMessage("updateCategoryStatus")):h.showToast("error",Message.getErrorMessage("api_error"))},function(a){})}}])}(),angular.module("bayaApp").service("CategoryService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.categoryForm={category_name:"",category_icon:""},this.category=function(b,d,e){if(void 0!==b.category_icon&&""!==b.category_icon){var f=new FormData;return f.append("image",b.category_icon),f.append("category_name",b.category_name),f.append("category_id",b.category_id),a.post(baseUrl+"api/admin/savecategory?access_token="+c,f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(d).error(e)}return a.post(baseUrl+"api/admin/savecategory?access_token="+c,b).success(d).error(e)},this.categoryList=function(b,d,e){var f="";return void 0!==b.category_name&&""!==b.category_name&&(f+="&category_name="+b.category_name),a.get(baseUrl+"api/admin/getcategorylist/"+b.page+"?access_token="+c+f).success(d).error(e)},this.categoryDetail=function(b,d,e){return a.get(baseUrl+"api/admin/categorydetail/"+b.id+"?access_token="+c,b).success(d).error(e)},this.deleteCategory=function(b,d,e){return a["delete"](baseUrl+"api/admin/deletecategory/"+b.id+"?access_token="+c,b).success(d).error(e)},this.changeStatus=function(b,d,e){return a.get(baseUrl+"api/admin/change-master-category-status/"+b.id+"/status/"+b.enabled+"?access_token="+c).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("ListingController",["$scope","$state","$location","$rootScope","$ngBootbox","$timeout","$filter","ListingService","UtilityService","AuthService","$stateParams",function(a,b,c,d,e,f,g,h,i,j,k){a.listing=h.ListingForm,a.listing={},a.verifiedListData=[],a.verifiedlistCurrentPage=1,a.nonVerifiedListData=[],a.nonVerifiedlistCurrentPage=1,a.listing.category=[],a.currentTab="verified",a.disableAddListBtn=!1,a.addlistLoader=!1,a.claimedListing=[],a.claimArray=[],a.userClaimArray=[],a.status={},a.statusVal="",a.statusData=[{id:"pending",label:"Pending"},{id:"waiting",label:"Waiting for claim"}],a.statusEvents={onItemDeselect:function(b){a.status={}},onItemSelect:function(b){""===a.statusVal&&a.statusVal!==b?(a.statusVal=b,a.status=b,a.getNonVerifiedListing()):(a.status={},a.statusVal="",a.getNonVerifiedListing())}},a.statusSettings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},a.saveListing=function(){a.form.$valid&&(a.disableAddListBtn=!0,a.addlistLoader=!0,h.saveListing(a.listing,function(d){d.success?(c.path("/admin/listing").search("status",void 0===c.search().status?"nonverified":c.search().status),h.ListingForm={},a.listing.categoryHddn="",a.stateHdn="",a.categoryArray=[],"admin.updatelisting"===b.current.name?i.showToast("success",Message.getSuccessMessage("updateListing")):i.showToast("success",Message.getSuccessMessage("createListing"))):(a.disableAddListBtn=!1,a.addlistLoader=!1,i.showToast("error",Message.getErrorMessage("createListing")))},function(b){a.disableAddListBtn=!1,a.addlistLoader=!1,i.showToast("error",b.message)}))},a.getListingDetails=function(c){angular.element(document.querySelector("#pageLoaderDiv")).addClass("overlay"),a.hidePageLoader=!0,h.getListingDetail(c,function(b){b.success&&(a.listing=b.data.listing_detail,a.listing.listing_id=b.data.listing_detail._id,a.stateHdn={id:b.data.listing_detail.state._id},angular.forEach(b.data.listing_detail.business_category,function(b){a.categoryArrayNew.push({id:b.cat_id._id}),a.categoryArray.push(b.cat_id._id)}),a.listing.category=a.categoryArrayNew,a.listing.business_category=a.categoryArray,a.listing.categoryHddn="check"),angular.element(document.querySelector("#pageLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1},function(c){angular.element(document.querySelector("#pageLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1,b.go("admin.listing"),i.showToast("error",c.message)})},"admin.updatelisting"===b.current.name&&a.getListingDetails(k.id),("admin.addlisting"===b.current.name||"admin.updatelisting"===b.current.name)&&(a.statesData=[],a.categoryData=[],a.statesText={buttonDefaultText:"Select State"},a.businessCatText={buttonDefaultText:"Select Business Category"},a.listing.categoryHddn="",a.stateHdn="",a.listing.business_category=[],a.categoryArray=[],a.categoryArrayNew=[],j.getStateList("",function(b){angular.forEach(b.data,function(b,c){a.statesData.push({id:b._id,label:b.state_name})})},function(a){i.showToast("error",a.message)}),a.stateEvents={onItemDeselect:function(b){a.listing.state=""},onItemSelect:function(b){a.listing.state=b.id,
a.stateHdn=b}},a.stateSettings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},h.getCategoryList("",function(b){angular.forEach(b.data,function(b,c){a.categoryData.push({id:b._id,label:b.category_name})})},function(a){i.showToast("error",a.message)}),a.categoryEvents={onItemDeselect:function(b){a.setCategory(),0===a.listing.business_category.length&&(a.listing.categoryHddn="")},onItemSelect:function(b){a.setCategory(),a.listing.categoryHddn="check"}},a.setCategory=function(){a.categoryArray=[],angular.forEach(a.listing.category,function(b){a.categoryArray.push(b.id)}),a.listing.business_category=a.categoryArray},a.multiSelectSettings={selectionLimit:0,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:3,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}}),a.tabChange=function(b){var c=angular.element(document.querySelector("#"+b));"verified"===b?$("#nonverified").removeClass("active"):$("#verified").removeClass("active"),a.currentTab="verified"===b?"verified":"nonverified",c.addClass("active")},a.getVerifiedListing=function(){a.verifiedListLoader=!0,a.verifiedListData=[],h.getListing({page:a.verifiedlistCurrentPage,is_verified:"verified",search:a.searchValue,claim_status:""},function(b){b.success&&b.data.items.length>0?(a.noVerifyListFound=!1,a.verifiedListData=b.data.items,a.verifyListMaxSize=b.data.page,a.verifyListTotalItems=b.data.totalItems,a.verifyListPagination=b.data.page>1?!0:!1):(a.verifyListPagination=!1,a.noVerifyListFound=!0),a.verifiedListLoader=!1},function(b){a.verifiedListLoader=!1})},a.getNonVerifiedListing=function(){a.nonVerifiedListLoader=!0,a.nonVerifiedListData=[],h.getListing({page:a.nonVerifiedlistCurrentPage,is_verified:"pending",search:a.searchValue,claim_status:a.status},function(b){b.success&&b.data.items.length>0?(a.noNonVerifyListFound=!1,a.nonVerifiedListData=b.data.items,a.nonVerifyListMaxSize=b.data.page,a.nonVerifyListTotalItems=b.data.totalItems,a.nonVerifyListPagination=b.data.page>1?!0:!1):(a.nonVerifyListPagination=!1,a.noNonVerifyListFound=!0),a.nonVerifiedListLoader=!1},function(b){a.nonVerifiedListLoader=!1})},a.getDate=function(a){return i.getDate(a)},a.getBusinessCategory=function(a){var b="";return a.length>0?(angular.forEach(a,function(a){b+=", "+a.cat_id.category_name}),b.replace(/^,|,$/g,"")):"-"},a.searchList=function(){"verified"===a.currentTab?a.getVerifiedListing():a.getNonVerifiedListing()},a.deleteListing=function(b,c,d){e.hideAll(),e.customDialog({message:Message.getAlertMessage("listing_delete"),className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){h.deleteListing({id:b},function(b){b.success?("verified"===c?(a.verifiedListData.splice(d,1),0===a.verifiedListData.length&&(a.noVerifyListFound=!0)):(a.nonVerifiedListData.splice(d,1),0===a.nonVerifiedListData.length&&(a.noNonVerifyListFound=!0)),i.showToast("success",Message.getSuccessMessage("listing_delete"))):i.showToast("error",Message.getErrorMessage("api_error"))},function(a){i.showToast("error",Message.getErrorMessage("api_error"))})}}}})},a.getClaimedListing=function(c){a.claimListLoader=!0,a.claimedListing=[],a.noClaimFound=!1,h.getClaimedListing(c,function(c){c.success?(a.userClaimArray=c.data.business_claim,angular.forEach(c.data.business_claim,function(b){"pending"===b.status&&a.claimedListing.push(b)}),a.claimedListing.length||(a.noClaimFound=!0)):(b.go("admin.listing"),i.showToast("error",Message.getErrorMessage("commonErr"))),a.claimListLoader=!1},function(c){a.claimListLoader=!1,b.go("admin.listing"),i.showToast("error",c.message)})},"admin.claimlisting"===b.current.name&&(a.noClaimFound=!1,a.getClaimedListing(k.id),a.acceptClaimForm=h.acceptClaimForm),a.acceptClaim=function(b,d,f,g){e.hideAll();var j="accepted"===f?"assign":"reject";e.customDialog({message:"Are you sure you want to "+j+" this listing ?",className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){a.claimArray=[],a.acceptClaimForm.listing_id=k.id,a.acceptClaimForm.user_id=b,a.acceptClaimForm.claim_id=d,a.acceptClaimForm.status=f,angular.forEach(g,function(b){if("accepted"===f){if(d===b._id){var c="accepted";a.claimArray.push({_id:b._id,user_id:b.user_id,status:c})}}else d!==b._id&&a.claimArray.push({_id:b._id,user_id:b.user_id,status:b.status})}),a.acceptClaimForm.claimArray=a.claimArray,h.acceptClaim(a.acceptClaimForm,function(b){b.success?("accepted"===f?c.path("/admin/listing").search("status","nonverified"):"rejected"===f&&a.getClaimedListing(k.id),a.acceptClaimForm={},i.showToast("success",b.message)):(c.path("/admin/listing").search("status","nonverified"),i.showToast("error",b.message))},function(a){c.path("/admin/listing").search("status","nonverified"),i.showToast("error",a.message)})}}}})},a.loadTab=function(a){"verified"===a?f(function(){angular.element(document.querySelector("#listingVerified")).addClass("active"),angular.element(document.querySelector("#listingNonVerified")).removeClass("active"),angular.element(document.querySelector("#verified")).addClass("active"),angular.element(document.querySelector("#nonverified")).removeClass("active")},200):f(function(){angular.element(document.querySelector("#listingVerified")).removeClass("active"),angular.element(document.querySelector("#listingNonVerified")).addClass("active"),angular.element(document.querySelector("#verified")).removeClass("active"),angular.element(document.querySelector("#nonverified")).addClass("active")},200)},(void 0===c.search().status||"verified"!==c.search().status&&"nonverified"!==c.search().status)&&a.getVerifiedListing(),"verified"===c.search().status&&(a.loadTab("verified"),a.getVerifiedListing()),"nonverified"===c.search().status&&(a.loadTab("nonverified"),a.getNonVerifiedListing()),("admin.updatelisting"===b.current.name||"admin.claimlisting"===b.current.name)&&setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#listingPage")).addClass("active")},200),a.loadEditPage=function(a,b){"verified"===a?c.path("/admin/update-listing/"+b).search("status",a):c.path("/admin/update-listing/"+b).search("status",a)},a.getClaimedCount=function(a){var b=0;return angular.forEach(a,function(a){"pending"===a.status&&(b+=1)}),b},a.changeListingStatus=function(a,b){e.hideAll();var c=a?"Listing successfully active.":"Listing successfully inactive.";a=a?"active":"inactive",h.changeListingStatus({status:a,listing_id:b},function(a){a.success?i.showToast("success",c):i.showToast("error",a.message)},function(a){i.showToast("error",a.message)})},a.cancelListing=function(b,c){a.listData=a.verifiedListData[b],a.postObject={},a.categoryArray=[],void 0!==a.listData&&""!==a.listData&&(e.hideAll(),e.customDialog({message:"Are you sure you want to cancel this listing ?",className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){a.postObject.business_name=a.listData.business_name,angular.forEach(a.listData.business_category,function(b){a.categoryArray.push(b.cat_id._id)}),a.postObject.business_category=a.categoryArray,a.postObject.neighbour=a.listData.neighbour,a.postObject.website_name=void 0!==a.listData.website_name?a.listData.website_name:"",a.postObject.phone_number=a.listData.phone_number,a.postObject.address=a.listData.address,a.postObject.city=a.listData.city,a.postObject.state=a.listData.state._id,a.postObject.zipcode=a.listData.zipcode,a.postObject.is_approved="approved",a.postObject.is_verified="pending",a.postObject.status="active",a.postObject.cancel_listing_id=c,h.cancelListing(a.postObject,function(b){b.success?(a.postObject={},a.categoryArray=[],a.loadTab("nonverified"),a.getNonVerifiedListing(),i.showToast("success","Listing successfully calcelled.")):i.showToast("error",b.message)},function(a){i.showToast("error",a.message)})}}}}))},a.backButton=function(){"nonverified"===c.search().status||"admin.claimlisting"===b.current.name?c.url("admin/listing?status=nonverified"):b.go("admin.listing")}}])}(),angular.module("bayaApp").service("ListingService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.ListingForm={business_name:"",category:[],neighbour:"",phone_number:"",address:"",state:"",city:"",zipcode:"",listing_id:"",website_name:""},this.acceptClaimForm={listing_id:"",user_id:"",claim_id:"",status:""},this.getCategoryList=function(b,d,e){return a.get(baseUrl+"api/admin/getcategory/?access_token="+c).success(d).error(e)},this.saveListing=function(b,d,e){return a.post(baseUrl+"api/admin/savelisting/?access_token="+c,b).success(d).error(e)},this.cancelListing=function(b,d,e){return a.post(baseUrl+"api/admin/cancellisting/?access_token="+c,b).success(d).error(e)},this.getListing=function(b,d,e){var f={user_type:"admin"};return void 0!==b.claim_status.id&&""!==b.claim_status&&(f.claim_status=b.claim_status.id),void 0!==b.search&&""!==b.search&&(f.business_name=b.search),a.post(baseUrl+"api/admin/getlisting/"+b.page+"?access_token="+c+"&is_verified="+b.is_verified,f).success(d).error(e)},this.getBusinessPageListing=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/admin/get-patient-business-list/"+b.page+"?access_token="+c+f).success(d).error(e)},this.getListingDetail=function(b,d,e){return a.get(baseUrl+"api/admin/listingdetail/"+b+"?access_token="+c).success(d).error(e)},this.deleteListing=function(b,d,e){return a["delete"](baseUrl+"api/admin/deleteListing/"+b.id+"?access_token="+c).success(d).error(e)},this.acceptBusinessListing=function(b,d,e){return a.post(baseUrl+"api/admin/accept-business-page?access_token="+c,b).success(d).error(e)},this.getAdminDashboardDetail=function(b,d,e){return a.get(baseUrl+"api/admin/admindashboard?access_token="+c).success(d).error(e)},this.getClaimedListing=function(b,d,e){return a.get(baseUrl+"api/admin/getclaimedlisting/"+b+"?access_token="+c).success(d).error(e)},this.acceptClaim=function(b,d,e){return a.post(baseUrl+"api/admin/acceptclaim/?access_token="+c,b).success(d).error(e)},this.changeListingStatus=function(b,d,e){return a.get(baseUrl+"api/admin/listing/"+b.listing_id+"/status/"+b.status+"?access_token="+c,b).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("UsersController",["$scope","$state","$location","$rootScope","UsersService","UtilityService","AuthService",function(a,b,c,d,e,f,g){a.userForm=e.UserForm,a.businessUserData=[],a.userListCurrentPage=1,a.patientListCurrentPage=1,a.currentTab="business_user",a.getBusinessUserListing=function(){a.businessUserListLoader=!0,a.businessUserData=[],e.getUsers({page:a.userListCurrentPage,user_type:"business_user",search:a.searchUser},function(b){b.success&&b.data.items.length>0?(a.noUserListFound=!1,a.businessUserData=b.data.items,a.businessListMaxSize=b.data.page,a.businessListTotalItems=b.data.totalItems,a.businessListPagination=b.data.page>1?!0:!1):(a.businessListPagination=!1,a.noUserListFound=!0),a.businessUserListLoader=!1},function(b){a.businessUserListLoader=!1})},a.getPatientUserListing=function(){a.patientUserListLoader=!0,a.patientUserData=[],e.getUsers({page:a.patientListCurrentPage,user_type:"patient",search:a.searchUser},function(b){b.success&&b.data.items.length>0?(a.noPatientListFound=!1,a.patientUserData=b.data.items,a.patientListMaxSize=b.data.page,a.patientListTotalItems=b.data.totalItems,a.patientListPagination=b.data.page>1?!0:!1):(a.patientListPagination=!1,a.noPatientListFound=!0),a.patientUserListLoader=!1},function(b){a.patientUserListLoader=!1})},"admin.users"===b.current.name&&a.getBusinessUserListing(),a.tabChange=function(b){var c=angular.element(document.querySelector("#"+b));"business_user"===b?$("#patient").removeClass("active"):$("#business_user").removeClass("active"),c.addClass("active"),a.currentTab=b},a.changeUserStatus=function(a,b){e.changeStatus({enabled:a?"active":"inactive",id:b},function(a){a.success?f.showToast("success",Message.getSuccessMessage("updateUserStatus")):f.showToast("error",Message.getErrorMessage("updateUserStatus"))},function(a){})},a.getDate=function(a){return f.getDate(a)},a.searchUsers=function(){"business_user"===a.currentTab?a.getBusinessUserListing():a.getPatientUserListing()}}])}(),angular.module("bayaApp").service("UsersService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.UserForm={},this.getUsers=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/admin/getusers/"+b.page+"?access_token="+c+"&user_type="+b.user_type+f).success(d).error(e)},this.changeStatus=function(b,d,e){return a.get(baseUrl+"api/admin/changestatus/"+b.id+"/status/"+b.enabled+"?access_token="+c).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("AdminDashboardController",["$scope","$state","$location","$rootScope","$stateParams","$ngBootbox","ListingService","UtilityService",function(a,b,c,d,e,f,g,h){a.businessOwnerCount=0,a.patientCount=0,a.businessListCount=0,a.getDashboardDetail=function(){g.getAdminDashboardDetail({},function(b){b.success&&(a.businessOwnerCount=b.data.business_owner,a.patientCount=b.data.patient,a.businessListCount=b.data.business_list)},function(a){})},a.getDashboardDetail()}])}(),!function(){"use strict";angular.module("bayaApp").controller("AdminProfileController",["$scope","$state","$location","$rootScope","$ngBootbox","AdminProfileService","UtilityService","$stateParams","$injector",function(a,b,c,d,e,f,g,h,i){a.adminProfileForm=f.adminProfileForm,a.adminProfileImage="",a.adminProfileImageSrc="images/default-profileimage.jpg";var j=i.get("$validation");a.updateAdminProfile=function(){a.form.$valid&&(a.updateBtnDisable=!0,a.updateBtnLoader=!0,a.adminProfileForm.admin_image=void 0!==a.adminProfileImage?a.adminProfileImage:"",f.updateProfile(a.adminProfileForm,function(b){b.success?(g.setLocalStorage("userInfo",b.data),d.setUserInfo(),g.showToast("success",Message.getSuccessMessage("updateAdminProfile"))):g.showToast("error",b.message),a.updateBtnDisable=!1,a.updateBtnLoader=!1},function(b){a.updateBtnDisable=!1,a.updateBtnLoader=!1,g.showToast("error",b.message)}))},a.getAdminProfile=function(){f.getAdminProfile("",function(b){angular.element(document.querySelector("#profileLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!0,a.adminProfileForm=b.data,""!==b.data.image?g.isImageExist("uploads/profile/thumb/"+b.data.image).then(function(c){c?a.adminProfileImageSrc=baseUrl+"uploads/profile/thumb/"+b.data.image:a.adminProfileImageSrc=baseUrl+"images/default-profileimage.jpg"}):a.adminProfileImageSrc=baseUrl+"images/default-profileimage.jpg"},function(b){angular.element(document.querySelector("#profileLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!0,g.showToast("error",b.message)})},"admin.adminprofile"===b.current.name&&(a.getAdminProfile(),a.fileClickEvent=function(){var a=document.getElementById("adminImageId");setTimeout(function(){a.click()},200)},document.getElementById("adminImageId").onchange=function(){a.file=this.value.split(".")[1],a.file=a.file.toLowerCase(),"gif"===a.file||"png"===a.file||"jpg"===a.file||"jpeg"===a.file?a.adminProfileImageSrc=URL.createObjectURL(this.files[0]):g.showToast("error",Message.getErrorMessage("invalid_file_formate"))}),a.changePassword=function(b){j.validate(b).success(function(){a.updateBtnDisable=!0,a.updateBtnLoader=!0,f.changePassword(a.changePasswordForm,function(c){c.success?(a.reset(b),g.showToast("success",Message.getSuccessMessage("password_changed"))):g.showToast("error",c.message),a.updateBtnDisable=!1,a.updateBtnLoader=!1},function(b){a.updateBtnDisable=!1,a.updateBtnLoader=!1,g.showToast("error",b.message)})}).error(function(){})},a.reset=function(a){j.reset(a)}}])}(),!function(){"use strict";angular.module("bayaApp").service("AdminProfileService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.userProfileForm={first_name:"",last_name:"",email:"",admin_image:"",phone:"",address:"",city:"",state:"",zipcode:"",_id:""},this.changePasswordForm={old_password:"",new_password:"",confirm_password:""},this.updateProfile=function(b,d,e){if(""!==b.admin_image&&void 0!==b.admin_image){var f=new FormData;return f.append("first_name",b.first_name),f.append("last_name",b.last_name),f.append("email",b.email),f.append("image",b.admin_image),a.post(baseUrl+"api/users/updateprofile?access_token="+c,f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(d).error(e)}return a.post(baseUrl+"api/users/updateprofile/?access_token="+c,b).success(d).error(e)},this.getAdminProfile=function(b,d,e){return a.get(baseUrl+"api/users/me/?access_token="+c,b).success(d).error(e)},this.changePassword=function(b,d,e){return a.post(baseUrl+"api/users/change-password?access_token="+c,b).success(d).error(e)}}])}(),angular.module("bayaApp").service("UserProfileService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.changePasswordForm={old_password:"",new_password:"",confirm_password:""},this.userProfileForm={first_name:"",last_name:"",email:"",phone_number:"",address:"",state:"",city:"",user_image:"",_id:""},this.getUsers=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/admin/getusers/"+b.page+"?access_token="+c+"&user_type="+b.user_type+f).success(d).error(e)},this.changePassword=function(b,d,e){return a.post(baseUrl+"api/users/change-password?access_token="+c,b).success(d).error(e)},this.updateProfile=function(b,d,e){if(""!==b.user_image&&void 0!==b.user_image){var f=new FormData;return f.append("first_name",b.first_name),f.append("last_name",b.last_name),f.append("email",b.email),f.append("image",b.user_image),f.append("phone_number",b.phone_number),f.append("state",b.state),f.append("address",b.address),f.append("city",b.city),a.post(baseUrl+"api/users/updateprofile?access_token="+c,f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(d).error(e)}return a.post(baseUrl+"api/users/updateprofile/?access_token="+c,b).success(d).error(e)},this.getUserProfile=function(b,d,e){return a.get(baseUrl+"api/users/me/?access_token="+c,b).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("UserProfileController",["$scope","$state","$injector","$location","$rootScope","$timeout","UserProfileService","UtilityService","AuthService",function(a,b,c,d,e,f,g,h,i){a.changePasswordForm=g.changePasswordForm,a.userProfileFrom=g.userProfileForm,a.updateBtnDisable=!1,a.updateBtnLoader=!1,a.userProfileImage="",f(function(){a.business_name=a.myBusinessInfo.business_name},200);var j=c.get("$validation");a.reset=function(a){j.reset(a)},a.changePassword=function(b){j.validate(b).success(function(){a.updateBtnDisable=!0,a.updateBtnLoader=!0,g.changePassword(a.changePasswordForm,function(c){c.success?(a.reset(b),h.showToast("success",Message.getSuccessMessage("password_changed"))):h.showToast("error",c.message),a.updateBtnDisable=!1,a.updateBtnLoader=!1},function(b){a.updateBtnDisable=!1,a.updateBtnLoader=!1,h.showToast("error",b.message)})}).error(function(){})},a.resetForm=function(){a.changePasswordForm={};var b=document.getElementById("resetFormId");b.click(),a.userForm.$valid=!1},a.updateUser=function(){a.form.$valid&&(a.updateBtnDisable=!0,a.updateBtnLoader=!0,a.userProfileFrom.user_image=void 0!==a.userProfileImage?a.userProfileImage:"",g.updateProfile(a.userProfileFrom,function(b){b.success?(h.setLocalStorage("userInfo",b.data),e.setUserInfo(),h.showToast("success",Message.getSuccessMessage("updateUserProfile"))):h.showToast("error",Message.getErrorMessage("signup")),a.updateBtnDisable=!1,a.updateBtnLoader=!1},function(b){a.updateBtnDisable=!1,a.updateBtnLoader=!1,h.showToast("error",b.message)}))},"user.userprofile"===b.current.name&&(a.statesData=[],a.stateHdn="",a.statesText={buttonDefaultText:"Select State"},i.getStateList("",function(b){angular.forEach(b.data,function(b,c){a.statesData.push({id:b._id,label:b.state_name})})},function(a){h.showToast("error",a.message)}),a.stateEvent={onItemDeselect:function(b){a.userProfileFrom.state=""},onItemSelect:function(b){a.userProfileFrom.state=b.id,a.stateHdn=b}},a.stateSettings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},g.getUserProfile("",function(b){angular.element(document.querySelector("#profileLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!0,a.userProfileFrom=b.data,""!==b.data.image&&void 0!==b.data.image?h.isImageExist("uploads/profile/thumb/"+b.data.image).then(function(c){c?a.userProfileImageSrc=baseUrl+"uploads/profile/thumb/"+b.data.image:a.userProfileImageSrc=baseUrl+"images/default-profileimage.jpg"}):a.userProfileImageSrc=baseUrl+"images/default-profileimage.jpg",a.stateHdn={id:b.data.state}},function(b){angular.element(document.querySelector("#profileLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!0,h.showToast("error",b.message)}),a.fileClickEvent=function(){var a=document.getElementById("userImageId");setTimeout(function(){a.click()},200)},document.getElementById("userImageId").onchange=function(){a.file=this.value.split(".")[1],a.file=a.file.toLowerCase(),"gif"===a.file||"png"===a.file||"jpg"===a.file||"jpeg"===a.file?a.userProfileImageSrc=URL.createObjectURL(this.files[0]):h.showToast("error",Message.getErrorMessage("invalid_file_formate"))})}])}(),!function(){"use strict";angular.module("bayaApp").controller("BusinessUserController",["$scope","$state","$location","$rootScope","$ngBootbox","ListingService","UtilityService","AuthService","$stateParams",function(a,b,c,d,e,f,g,h,i){a.businessPageCurrentPage=1,a.businessList=[],a.pageData={},a.getBusinessPageListing=function(){a.businessListLoader=!0,a.businessList=[],f.getBusinessPageListing({page:a.businessPageCurrentPage,search:a.searchValue},function(b){b.success&&b.data.items.length>0?(a.noBusinessPagesFound=!1,a.businessList=b.data.items,a.businessPageMaxSize=b.data.page,a.businessListTotalItems=b.data.totalItems,a.businessListPagination=b.data.page>1?!0:!1):(a.businessListPagination=!1,a.noBusinessPagesFound=!0),a.businessListLoader=!1},function(b){a.businessListLoader=!1})},"admin.businesspages"===b.current.name&&a.getBusinessPageListing(),a.tabActive=function(){setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#businessPage")).addClass("active")},200)},a.getBusinessPageDetail=function(){a.tabActive(),a.pageError=!1,a.pageDetail=!1,f.getListingDetail(i.id,function(b){b.success?a.pageData=b.data.listing_detail:(a.pageError=!0,a.pageDetail=!0)},function(b){a.pageError=!0,a.pageDetail=!0})},"admin.businessview"===b.current.name&&a.getBusinessPageDetail(),a.acceptBusinessList=function(b,c,d){e.hideAll(),e.customDialog({message:"Are you sure you want to "+c+" this business ?",className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){var e={listing_id:b,status:"accept"===c?"approved":"disapproved"};f.acceptBusinessListing(e,function(b){b.success?(a.businessList.splice(d,1),0===a.businessList.length&&(a.noBusinessPagesFound=!0),g.showToast("success","accept"===c?Message.getSuccessMessage("accept_business_listing"):Message.getSuccessMessage("reject_business_listing"))):g.showToast("error",Message.getErrorMessage("api_error"))},function(a){g.showToast("error",Message.getErrorMessage("api_error"))})}}}})},a.getDate=function(a){return g.getDate(a)},a.getBusinessCategory=function(a){var a=a||[],b="";return a.length>0&&void 0!==a?(angular.forEach(a,function(a){b+=", "+a.cat_id.category_name}),b.replace(/^,|,$/g,"")):"-"}}])}(),!function(){"use strict";angular.module("bayaApp").controller("SiteController",["$scope","$state","$location","$rootScope","SiteService","UtilityService","$stateParams","$ngBootbox","AuthService",function(a,b,c,d,e,f,g,h,i){a.loginFrom=i.loginForm,a.userDetail=f.getLocalStorage("userInfo"),a.businessListing=[],a.claimOnListArr={},a.pageCnt="",a.paginate=1,a.loadmore=!1,a.loadMoreLoder=!1,a.loadMoreDisable=!1,a.noRecordFound=!1,a.loginChk=!1,a.listingDetails="",a.noScheduleFound=!1,a.pageDetail={},a.listingLoader=!0,a.noDoctorFound=!1,a.loader=!1,a.disableLoginSbmtBtn=!1,a.claimProfile={display:""},a.claimId="",a.defaultBusinessLogo="uploads/listing/default_logo.jpg",a.myListingId="",a.getMyListing=f.getLocalStorage("myBusiness"),a.isOwner=!1,a.isOwnerId="",a.myClaim={},a.myListingClaim={},!a.showAfterLoginHeader||f.getUserInfo()&&void 0!==f.getUserInfo()&&""!==f.getUserInfo()||(angular.element(document.querySelector("#showBeforeLoginHeader")).removeClass("ng-hide"),angular.element(document.querySelector("#showAfterLoginHeader")).addClass("ng-hide")),a.checkQueryString=function(){""!==c.search().business_name&&(a.businessName=c.search().businessName),""!==c.search().address&&(a.address=c.search().address)},a.checkQueryString(),a.getAllBusinessListing=function(b){a.postData={},a.loadMoreLoder=!0,a.loadMoreDisable=!0,a.noRecordFound=!1,a.paginate=b,a.pageCnt>=a.paginate&&a.paginate++,void 0===a.paginate&&(a.businessListing=[],a.paginate=1,a.listingLoader=!0),""!==a.businessName&&void 0!==a.businessName&&(a.postData.business_name=a.businessName),""!==a.address&&void 0!==a.address&&(a.postData.address=a.address),a.postData.page=a.paginate,e.getAllBusinessListing(a.postData,function(b){a.listingLoader=!1,b.success===!0?(a.myListingClaim=b.data.my_listing_claim,a.businessListing.push.apply(a.businessListing,b.data.listing.data),0!==a.businessListing.length?(a.pageCnt=b.data.listing.pageCount,a.pageCnt>1&&(a.loadmore=!0),a.paginate===b.data.listing.pageCount&&(a.loadmore=!1),f.checkUserLogin()&&(a.loginChk=!0)):(a.loadmore=!1,a.noRecordFound=!0)):f.showToast("error",b.message),a.loadMoreLoder=!1,a.loadMoreDisable=!1},function(b){a.loadMoreLoder=!1,a.loadMoreDisable=!1,f.showToast("error",b.message)})},"root.listing"===b.current.name&&a.getAllBusinessListing(a.paginate),a.getBusinessListingDetail=function(c){angular.element(document.querySelector("#pageLoaderDiv")).addClass("overlay"),a.hidePageLoader=!0,e.getBusinessListingDetail(c,function(b){b.success&&(a.listingDetails=b.data.listing_detail,a.myClaim=b.data.my_listing_claim,a.defaultBusinessLogo="uploads/listing/"+b.data.listing_detail.business_logo,f.checkUserLogin()&&(a.loginChk=!0),(void 0===a.listingDetails.availability||0===a.listingDetails.availability.availability.length)&&(a.noScheduleFound=!0),0===a.listingDetails.doctors.length&&(a.noDoctorFound=!0),a.loadMap(),angular.forEach(a.listingDetails.business_claim,function(b){("pending"===b.status||"accepted"===b.status)&&(a.hideClaimButton=!0)})),angular.element(document.querySelector("#pageLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1},function(c){angular.element(document.querySelector("#pageLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1,b.go("root.listing"),f.showToast("error",c.message)})},"root.doctordetails"===b.current.name&&a.getBusinessListingDetail(g.id),a.claimOnList=function(c){h.customDialog({message:Message.getAlertMessage("claimOnList"),className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-info",callback:function(){a.claimOnListArr.listing_id=c,e.claimOnList(a.claimOnListArr,function(a){a.success?(d.userDashboard(),b.go(b.current,{},{reload:!0}),f.showToast("success",a.message)):f.showToast("error",a.message)},function(a){f.showToast("error",a.message)})}}}})},a.getCmsPageDetail=function(){a.showPageLoader=!1,a.termAndCondition="terms-and-conditions"===g.slug?!0:!1,a.privacyPolicy="privacy-policy"===g.slug?!0:!1,e.getCmsPageDetail({slug:g.slug},function(c){c.success?a.pageDetail=c.data:b.go("root.home"),a.showPageLoader=!0},function(c){a.showPageLoader=!0,b.go("root.home")})},"root.pagedetail"===b.current.name&&a.getCmsPageDetail(),a.loadMap=function(){a.lattitude=void 0===a.listingDetails.loc[1]?0:a.listingDetails.loc[1],a.longtitude=void 0===a.listingDetails.loc[0]?0:a.listingDetails.loc[0];var b={zoom:5,center:new google.maps.LatLng(a.lattitude,a.longtitude),mapTypeId:google.maps.MapTypeId.TERRAIN},c=new google.maps.InfoWindow;if(a.map=new google.maps.Map(document.getElementById("googleMap"),b),a.markers=[],a.selectedMarker={},void 0!==a.lattitude&&0!==a.longtitude){var d=new google.maps.Marker({map:a.map,position:new google.maps.LatLng(a.lattitude,a.longtitude),title:a.listingDetails.business_name});d.content='<div class="infoWindowContent">'+a.listingDetails.address+", "+a.listingDetails.zipcode+"</div>",google.maps.event.addListener(d,"click",function(){c.setContent("<h2>"+d.title+"</h2>"+d.content),a.selectedMarker=d,a.$apply(),c.open(a.map,d)}),a.markers.push(d)}a.openInfoWindow=function(a,b){google.maps.event.trigger(b,"click")}},a.login=function(){a.form.$valid&&(a.loader=!0,a.disableLoginSbmtBtn=!0,i.login(a.loginFrom,function(b){b.success===!0?(f.setLocalStorage("userInfo",b.data),window.location.reload(),i.loginForm={}):f.showToast("error",b.message),a.loader=!1,a.disableLoginSbmtBtn=!1},function(b){a.loader=!1,a.disableLoginSbmtBtn=!1,f.showToast("error",b.message)}))},a.clearLoginValues=function(){a.loginFrom={email:"",password:""}},a.cancelClaimOnList=function(a,c){h.customDialog({message:Message.getAlertMessage("cancel_claim"),className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-info",callback:function(){e.cancelClaimOnList({claim_id:c,listing_id:a},function(a){a.success?(d.userDashboard(),f.showToast("success",a.message),b.go(b.current,{},{reload:!0})):f.showToast("error",a.message)},function(a){f.showToast("error",a.message)})}}}})}}])}(),!function(){"use strict";angular.module("bayaApp").controller("CmsController",["$scope","$state","$location","$rootScope","$stateParams","$ngBootbox","CmsService","UtilityService",function(a,b,c,d,e,f,g,h){a.cms_image_path="images/defult_icon.png",a.imageData=[],a.pageData=[],a.cmsImageCurrentPage=1,a.currentTab="page",a.baseUrl=window.baseUrl,a.cmsPageCurrentPage=1,a.editorOptions={height:"300px"},a.tabChange=function(b){var c=angular.element(document.querySelector("#"+b));"image"===b?$("#page").removeClass("active"):$("#image").removeClass("active"),a.currentTab="image"===b?"image":"page",c.addClass("active")},a.saveImage=function(){""!==a.imageTitle&&void 0!==a.imageTitle&&""!==a.cmsImage&&void 0!==a.cmsImage?(a.titleError=!1,a.imageError="",a.disableImageBtn=!0,a.imageLoader=!0,g.cmsImage({title:a.imageTitle,image:a.cmsImage},function(b){b.success?(a.imageTitle="",a.cmsImage="",a.cms_image_path="images/defult_icon.png",document.getElementById("cmsImage").value="",h.showToast("success",Message.getSuccessMessage("image_success"))):h.showToast("error",Message.getErrorMessage("api_error")),a.disableImageBtn=!1,a.imageLoader=!1},function(b){a.disableImageBtn=!1,a.imageLoader=!1,h.showToast("error",Message.getErrorMessage("api_error"))})):(a.titleError=""===a.imageTitle||void 0===a.imageTitle?!0:!1,a.imageError=""===a.cmsImage||void 0===a.cmsImage?"Image is required.":"")},document.getElementById("cmsImage").onchange=function(){a.cmsFile=this.value.split(".")[1],a.cmsFile=a.file.toLowerCase(),"gif"===a.cmsFile||"png"===a.cmsFile||"jpg"===a.cmsFile||"jpeg"===a.cmsFile?a.cms_image_path=URL.createObjectURL(this.files[0]):h.showToast("error",Message.getErrorMessage("invalid_file_formate"));
},a.updatePage=function(){""!==a.pageTitle&&""!==e.id&&void 0!==e.id&&void 0!==a.pageTitle&&null!==a.cmsPageContent&&void 0!==a.cmsPageContent?(a.pageTitleError=!1,a.pageContentError=!1,a.disablePageUpdateBtn=!0,a.pageLoader=!0,a.data={page_id:e.id,page_content:a.cmsPageContent},g.saveCmsPage(a.data,function(b){b.success?h.showToast("success",Message.getSuccessMessage("cms_page_update_success")):h.showToast("error",Message.getErrorMessage("api_error")),a.disablePageUpdateBtn=!1,a.pageLoader=!1},function(b){a.disablePageUpdateBtn=!1,a.pageLoader=!1,h.showToast("error",Message.getErrorMessage("api_error"))})):(a.pageTitleError=""===a.pageTitle||void 0===a.pageTitle?!0:!1,a.pageContentError=null===a.cmsPageContent||void 0===a.cmsPageContent?!0:!1)},a.getImage=function(){a.cmsImageListLoader=!0,a.cmsImageListPagination=!1,a.imageData=[],g.getImageList({page:a.cmsImageCurrentPage,search:a.searchValue},function(b){b.success&&b.data.items.length>0?(a.noCmsImageFound=!1,a.imageData=b.data.items,a.cmsImageMaxSize=b.data.page,a.cmsImageTotalItems=b.data.totalItems,a.cmsImageListPagination=b.data.page>1?!0:!1):a.noCmsImageFound=!0,a.cmsImageListLoader=!1},function(b){a.cmsImageListLoader=!1})},a.getPageDetail=function(){g.getCmsPageDetail({id:e.id},function(c){c.success?(a.pageTitle=c.data.page_title,a.cmsPageContent=c.data.page_content):b.go("admin.cmspage"),angular.element(document.querySelector("#pageLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!0},function(c){angular.element(document.querySelector("#pageLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!0,b.go("admin.cmspage")})},"admin.updatecmspage"===b.current.name&&(a.getPageDetail(),setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#cmsManage")).addClass("active")},200)),a.getCmsPage=function(){a.cmsPageListLoader=!0,a.pageData=[],g.getCmsPageList({page:a.cmsPageCurrentPage,search:a.searchValue},function(b){b.success&&b.data.items.length>0?(a.noCmsPageFound=!1,a.pageData=b.data.items,a.cmsPageMaxSize=b.data.page,a.cmsPageTotalItems=b.data.totalItems,a.cmsPageListPagination=b.data.page>1?!0:!1):a.noCmsPageFound=!0,a.cmsPageListLoader=!1},function(b){a.cmsPageListLoader=!1})},"admin.cmspage"===b.current.name&&a.getCmsPage(),a.fileClickEvent=function(){var a=document.getElementById("categoryIcon");setTimeout(function(){a.click()},200)},a.getDate=function(a){return h.getDate(a)},a.deleteImage=function(b,c){f.hideAll(),f.customDialog({message:Message.getAlertMessage("cms_image_delete"),className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){g.deleteCmsImage({id:b},function(b){b.success?(a.imageData.splice(c,1),0===a.imageData.length&&(a.noCmsImageFound=!0),h.showToast("success",Message.getSuccessMessage("image_delete"))):h.showToast("error",Message.getErrorMessage("api_error"))},function(a){h.showToast("error",Message.getErrorMessage("api_error"))})}}}})},"admin.addimage"===b.current.name&&setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#cmsManage")).addClass("active")},200),a.searchResult=function(){"image"===a.currentTab?a.getImage():a.getCmsPage()}}])}(),angular.module("bayaApp").service("CmsService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.cmsImage=function(b,d,e){var f=new FormData;return f.append("image",b.image),f.append("image_title",b.title),a.post(baseUrl+"api/admin/savecmsimage?access_token="+c,f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(d).error(e)},this.getImageList=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/admin/getcmsimage/"+b.page+"?access_token="+c+f).success(d).error(e)},this.deleteCmsImage=function(b,d,e){return a["delete"](baseUrl+"api/admin/deletecmsimage/"+b.id+"?access_token="+c).success(d).error(e)},this.getCmsPageList=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/admin/getcmspage/"+b.page+"?access_token="+c+f).success(d).error(e)},this.getCmsPageDetail=function(b,d,e){return a.get(baseUrl+"api/admin/pagedetail/"+b.id+"?access_token="+c).success(d).error(e)},this.saveCmsPage=function(b,d,e){return a.post(baseUrl+"api/admin/cmspage?access_token="+c,b).success(d).error(e)}}]),angular.module("bayaApp").service("SiteService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.getAllBusinessListing=function(d,e,f){return b.checkUserLogin()?a.post(baseUrl+"api/users/get-user-business-listing/"+d.page+"?access_token="+c,d).success(e).error(f):a.post(baseUrl+"api/users/get-user-business-listing/"+d.page,d).success(e).error(f)},this.getBusinessListingDetail=function(d,e,f){return b.checkUserLogin()?a.get(baseUrl+"api/users/get-business-detail-by-id/"+d+"?access_token="+c).success(e).error(f):a.get(baseUrl+"api/public/get-business-detail-by-id/"+d).success(e).error(f)},this.getCmsPageDetail=function(b,c,d){return a.get(baseUrl+"api/public/getcmspagedetail/"+b.slug).success(c).error(d)},this.claimOnList=function(b,d,e){return a.post(baseUrl+"api/users/claim-on-list?access_token="+c,b).success(d).error(e)},this.cancelClaimOnList=function(b,d,e){return a.get(baseUrl+"api/users/claim-cancel/"+b.claim_id+"/listing/"+b.listing_id+"?access_token="+c,b).success(d).error(e)}}]),angular.module("bayaApp").service("UserCalendarService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.getAppointments=function(b,d,e){return a.get(baseUrl+"api/users/get-list-appointments/"+b.listing_id+"?access_token="+c,b).success(d).error(e)},this.getAppointmentDetail=function(b,d,e){return a.get(baseUrl+"api/users/get-appointment-detail-by-id/"+b+"?access_token="+c).success(d).error(e)},this.getListingAppointmentByDate=function(b,d,e){var f=b.page||1;return a.post(baseUrl+"api/users/get-listing-appointments-by-date/"+f+"?access_token="+c,b).success(d).error(e)},this.changeAppointmentStatus=function(b,d,e){return a.get(baseUrl+"api/users/change-appointment-status/"+b.id+"/status/"+b.status+"?access_token="+c).success(d).error(e)},this.rescheduleAppointment=function(b,d,e){return a.post(baseUrl+"api/users/appointment?access_token="+c,b).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("UserCalendarController",["$scope","$state","$injector","$location","$rootScope","$modal","$ngBootbox","$filter","$timeout","UserCalendarService","UtilityService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){var b,c=a.split(":");return b=12===+c[0]?c[0]+":"+c[1]+" PM":"00"===+c[0]?"12:"+c[1]+" AM":+c[0]>12?(+c[0]-12<=9?"0"+(+c[0]-12):+c[0]-12)+":"+c[1]+" PM":(+c[0]<=9?"0"+ +c[0]:+c[0])+":"+c[1]+" AM"}(new Date).getFullYear(),(new Date).getMonth();a.myBusinessInfo=k.getLocalStorage("myBusiness"),a.events=[],a.viewAppointment=[],a.viewAllAppointmentByDate=[],a.viewAppointmentData={},a.appointmentCurrentPage=1,e.clickDate="",a.date="",a.timeArray=[],a.scheduleTime="",a.getAppointments=function(){a.events=[],j.getAppointments({listing_id:a.myBusinessInfo._id},function(b){b.success&&angular.forEach(b.data,function(b){a.events.push({title:(void 0===b.patient_info.first_name?"-":b.patient_info.first_name)+" "+(void 0===b.patient_info.last_name?"-":b.patient_info.last_name),type:"",starts_at:k.changeDateToTime(b.appointment_date,!0),ends_at:k.changeDateToTime(b.appointment_date,!0)})})},function(a){k.showToast("error",a.message)})},""!==a.myBusinessInfo&&void 0!==a.myBusinessInfo&&a.myBusinessInfo!==!1&&void 0!==a.myBusinessInfo._id&&a.getAppointments(),a.calendarView="month",a.calendarDay=new Date,a.eventClicked=function(b){var c=b.date.toDate(),d=c.getFullYear(),f=c.getMonth()+1,g=c.getDate(),h=d+"-"+f+"-"+g,i=$("#"+h).parent().find(".cal-day-outmonth").length,j=k.convertDateObjToDate(b.date.toDate());i||(e.clickDate=j,$(".cal-month-day").removeClass("cal-selected-date"),$("#"+h).addClass("cal-selected-date"),""!==a.myBusinessInfo&&void 0!==a.myBusinessInfo&&a.myBusinessInfo!==!1&&a.getPatientAppointmentByDate())},a.eventEdited=function(a){showModal("Edited",a)},a.eventDeleted=function(a){showModal("Deleted",a)},a.setCalendarToToday=function(){a.calendarDay=new Date},a.toggle=function(a,b,c){a.preventDefault(),a.stopPropagation(),c[b]=!c[b]},a.getPatientAppointmentByDate=function(){a.showViewAllBtn=!1;var b=k.getDateObj(e.clickDate),c=k.getUtcDate(b),d={appointment_date:c,listing_id:a.myBusinessInfo._id};a.viewAppointment=[],a.showSelectDateMsg=!0,a.viewAppointmentLoader=!0,a.noAppointmentFound=!1,j.getListingAppointmentByDate(d,function(b){b.success&&b.data.items.length?(a.viewAppointment=b.data.items,a.showViewAllBtn=b.data.items.length?!0:!1):a.noAppointmentFound=!0,a.viewAppointmentLoader=!1},function(b){a.noAppointmentFound=!1,a.viewAppointmentLoader=!1,k.showToast("error",b.message)})},a.getAppointmentDetail=function(b){a.viewAppointmentData={},j.getAppointmentDetail(b,function(b){if(b.success){a.scheduleTime=b.data.appointment_time,$("#viewdetail").modal("show");var c=new Date;c.setHours(0,0,0,0);var d=c.getTime(),e=new Date(b.data.appointment_date);e.setHours(0,0,0,0);var f=e.getTime();if(d===f||e>c)var g=!0;else var g=!1;switch(a.afterDate=!1,a.backDate=!1,a.date=new Date(b.data.appointment_date),b.data.appointment_status){case"pending":""===b.data.rescheduled_by||void 0===b.data.rescheduled_by||"patient"===b.data.rescheduled_by?g?(a.afterDate=!0,a.backDate=!1,a.hideAcceptBtn=!0):(a.afterDate=!1,a.backDate=!0,a.hideVisitedBtn=!0):$("#pendingTxt").html("Pending..");break;case"accepted":a.afterDate=!0,a.hideAcceptBtn=!1,a.appointmentAccepted=!0,a.appointmentRejected=!1;break;case"rejected":a.afterDate=!0,a.hideAcceptBtn=!1,a.appointmentAccepted=!1,a.appointmentRejected=!0;break;case"visited":a.afterDate=!1,a.backDate=!0,a.hideVisitedBtn=!1,a.appointmentVisited=!0,a.appointmentMissed=!1;break;case"missed":a.afterDate=!1,a.backDate=!0,a.hideVisitedBtn=!1,a.appointmentMissed=!0,a.appointmentVisited=!1}a.viewAppointmentData=b.data}a.viewAppointmentLoader=!1},function(b){a.viewAppointmentLoader=!1,k.showToast("error",b.message)})},a.getDate=function(a){return k.getDate(a)},a.getDetail=function(){e.userDashboard()},a.acceptAppointment=function(b,c){g.hideAll();var d="";switch(c){case"pending":d="pending";break;case"accepted":d="accept";break;case"rejected":d="reject";break;case"visited":d="visit";break;case"missed":d="miss"}g.customDialog({message:"Are you sure you want to "+d+" this appointment ?",className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){j.changeAppointmentStatus({id:b,status:c},function(d){if(d.success){a.getAppointmentDetail(b);var e="Appointment successfully "+c+".";k.showToast("success",e),a.getDetail()}else k.showToast("error",Message.getErrorMessage("api_error"))},function(a){k.showToast("error",Message.getErrorMessage("api_error"))})}}}})},a.getAppointmentHistory=function(){var b=k.getDateObj(e.clickDate),c=k.getUtcDate(b);a.viewAllAppointmentByDate=[],a.viewAppointmentHistoryLoader=!0,a.noAppointmentHistoryFound=!1,j.getListingAppointmentByDate({page:a.appointmentCurrentPage,appointment_date:c,listing_id:a.myBusinessInfo._id},function(b){b.success&&b.data.items.length?(a.viewAllAppointmentByDate=b.data.items,a.appointmentListMaxSize=b.data.page,a.appointmentListTotalItems=b.data.totalItems,a.appointmentListPagination=b.data.page>1?!0:!1):a.noAppointmentHistoryFound=!0,a.viewAppointmentHistoryLoader=!1},function(b){a.noAppointmentHistoryFound=!1,a.viewAppointmentHistoryLoader=!1,k.showToast("error",b.message)})},a.getDoctorName=function(a,b){var c="-";return a.length&&void 0!==b&&angular.forEach(a,function(a){a._id===b&&(c=a.name)}),c},a.appointmentstatusChk=function(a,b,c){var d=new Date;d.setHours(0,0,0,0);var e=d.getTime(),f=new Date(b);f.setHours(0,0,0,0);var g=f.getTime();if(e===g||g>e)var h=!0;else var h=!1;switch(a){case"pending":h?setTimeout(function(){$("#afterDate_"+c).show(),$("#backDate_"+c).hide(),$("#acceptClickBtn_"+c).show(),$("#acceptNonClickBtn_"+c).hide()},200):setTimeout(function(){$("#afterDate_"+c).hide(),$("#backDate_"+c).show(),$("#visitClickBtn_"+c).show(),$("#visitNonClickBtn_"+c).hide()},200);break;case"accepted":setTimeout(function(){$("#afterDate_"+c).show(),$("#backDate_"+c).hide(),$("#acceptNonClickBtn_"+c).show(),$("#acceptClickBtn_"+c).hide(),$("#acceptBtn_"+c).show(),$("#rejectBtn_"+c).hide()},200);break;case"rejected":setTimeout(function(){$("#afterDate_"+c).show(),$("#backDate_"+c).hide(),$("#acceptNonClickBtn_"+c).show(),$("#acceptClickBtn_"+c).hide(),$("#acceptBtn_"+c).hide(),$("#rejectBtn_"+c).show()},200);break;case"visited":setTimeout(function(){$("#afterDate_"+c).hide(),$("#backDate_"+c).show(),$("#visitNonClickBtn_"+c).show(),$("#visitClickBtn_"+c).hide(),$("#visitedBtn_"+c).show(),$("#missedBtn_"+c).hide()},200);break;case"missed":setTimeout(function(){$("#afterDate_"+c).hide(),$("#backDate_"+c).show(),$("#visitNonClickBtn_"+c).show(),$("#visitClickBtn_"+c).hide(),$("#missedBtn_"+c).show(),$("#visitedBtn_"+c).hide()},200)}},a.today=function(){a.calendarDate=new Date},a.today(),a.open=function(b){a.status.opened=!0},a.opened=function(b){b.preventDefault(),b.stopPropagation(),void 0!==a.fromDate&&(a.toMinDate=a.fromDate),a.toOpened=!a.toOpened},a.dateOptions={showWeeks:!1,showClose:!1},a.formats=["dd-MMMM-yyyy","dd/MM/yyyy","MM/dd/yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[2],a.selectDate=function(b){var c=k.convertDateObjToDate(b);setTimeout(function(){a.$apply(function(){e.clickDate=c,$(".main-container").addClass("in")})},1e3),setTimeout(function(){angular.element("#viewall").trigger("click")},2e3)},a.rescheduleAppointment=function(b,c){a.appointment_day=moment(a.viewAppointmentData).format("dddd"),a.changeDate(a.viewAppointmentData.appointment_date),setTimeout(function(){a.$apply()},200),angular.element(document.querySelector("#viewdetail")).modal("hide"),angular.element(document.querySelector("#updateAppointment")).modal("show")},a.changeDate=function(b){if(a.appointment_day=moment(b).format("dddd"),a.dayObject={},a.timeArray=[],angular.forEach(a.viewAppointmentData.listing_id.availability.availability,function(b){a.appointment_day===b.availability_day&&(a.dayObject=b)}),a.time_slot=a.viewAppointmentData.listing_id.availability.availability_slot,a.schedule_from_time=a.dayObject.availability_from,a.schedule_to_time=a.dayObject.availability_to,a.appointment_from_schedule=a.dayObject.availability_schedule_from,a.appointment_to_schedule=a.dayObject.availability_schedule_to,a.appointment_date=a.viewAppointmentData.appointment_date,30===a.time_slot){"12:00"===a.schedule_from_time&&(a.schedule_from_time="01:00",a.timeArray=["12:00 AM","12:30 AM"]),a.appointmentFromDateTime=k.getDate(a.appointment_date),a.appointmentFromDateTime=new Date(""+a.appointmentFromDateTime+" "+a.schedule_from_time+" "+a.appointment_from_schedule),a.appointmentToDateTime=k.getDate(a.appointment_date),a.appointmentToDateTime=new Date(""+a.appointmentToDateTime+" "+a.schedule_to_time+" "+a.appointment_to_schedule);var c=Math.abs(a.appointmentFromDateTime-a.appointmentToDateTime),d=Math.floor(c/1e3/60),e=d/30,f=a.schedule_from_time.split(":"),g=a.schedule_to_time.split(":");f=parseInt(f),g=parseInt(g);for(var h="00",i=0;e+1>i;i++)a.schedule=l(("30"===h?f++:f)+":"+h),a.timeArray.push(a.schedule),h="00"===h?"30":"00"}if(15===a.time_slot){"12:00"===a.schedule_from_time&&(a.schedule_from_time="01:00",a.timeArray=["12:00 AM","12:15 AM","12:30 AM"]),a.appointmentFromDateTime=k.getDate(a.appointment_date),a.appointmentFromDateTime=new Date(""+a.appointmentFromDateTime+" "+a.schedule_from_time+" "+a.appointment_from_schedule),a.appointmentToDateTime=k.getDate(a.appointment_date),a.appointmentToDateTime=new Date(""+a.appointmentToDateTime+" "+a.schedule_to_time+" "+a.appointment_to_schedule);var c=Math.abs(a.appointmentFromDateTime-a.appointmentToDateTime),d=Math.floor(c/1e3/60),e=d/15,f=a.schedule_from_time.split(":"),g=a.schedule_to_time.split(":");f=parseInt(f),g=parseInt(g);for(var h=0,i=0;e+1>i;i++){var j=(45===h?f++:f)+":"+h;a.schedule=l(j),a.schedule=a.schedule.split(":"),a.scheduleMiniute=a.schedule[0],a.scheduleSecond=a.schedule[1].split(" "),a.scheduleSlot=a.scheduleSecond[1],a.scheduleSecond="0"===a.scheduleSecond[0]?"00":a.scheduleSecond[0],a.scheduleSecond="60"===a.scheduleSecond?"00":a.scheduleSecond,a.timeArray.push(a.scheduleMiniute+":"+a.scheduleSecond+" "+a.scheduleSlot),h=60===h?0:h,h+=15}}if(60===a.time_slot){"12:00"===a.schedule_from_time&&(a.schedule_from_time="01:00",a.timeArray=["12:00 AM"]),a.appointmentFromDateTime=k.getDate(a.appointment_date),a.appointmentFromDateTime=new Date(""+a.appointmentFromDateTime+" "+a.schedule_from_time+" "+a.appointment_from_schedule),a.appointmentToDateTime=k.getDate(a.appointment_date),a.appointmentToDateTime=new Date(""+a.appointmentToDateTime+" "+a.schedule_to_time+" "+a.appointment_to_schedule);var c=Math.abs(a.appointmentFromDateTime-a.appointmentToDateTime),d=Math.floor(c/1e3/60),e=d/60,f=a.schedule_from_time.split(":"),g=a.schedule_to_time.split(":");f=parseInt(f),g=parseInt(g);for(var h="00",i=0;e+1>i;i++)a.schedule=l(f+":00"),a.timeArray.push(a.schedule),f++}if(45===a.time_slot){"12:00"===a.schedule_from_time&&(a.schedule_from_time="01:00",a.timeArray=["12:45 AM"]),a.appointmentFromDateTime=k.getDate(a.appointment_date),a.appointmentFromDateTime=new Date(""+a.appointmentFromDateTime+" "+a.schedule_from_time+" "+a.appointment_from_schedule),a.appointmentToDateTime=k.getDate(a.appointment_date),a.appointmentToDateTime=new Date(""+a.appointmentToDateTime+" "+a.schedule_to_time+" "+a.appointment_to_schedule);var c=Math.abs(a.appointmentFromDateTime-a.appointmentToDateTime),d=Math.floor(c/1e3/60),e=d/60,f=a.schedule_from_time.split(":"),g=a.schedule_to_time.split(":");f=parseInt(f),g=parseInt(g);for(var i=0;e>i;i++)a.schedule=l(f+":45"),a.timeArray.push(a.schedule),f++}a.timeArray=a.timeArray.filter(function(a,b,c){return c.indexOf(a)==b}),a.scheduleTime=a.viewAppointmentData.appointment_time,setTimeout(function(){a.$apply()},200)},a.appointmentReschedule=function(){$(".main-container").hasClass("in");a.curruentAppointmentDetail=a.viewAppointmentData,g.hideAll(),g.customDialog({message:"Are you sure you want to reschedule this appointment ?",className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){var b=k.getUtcDate(a.date);a.timeError=!1,$.inArray(a.scheduleTime,a.timeArray)>-1?a.curruentAppointmentDetail.appointment_date!==b||a.scheduleTime!==a.curruentAppointmentDetail.appointment_time?(a.resheduleData={appointment_id:a.curruentAppointmentDetail._id,listing_id:a.curruentAppointmentDetail.listing_id,appointment_date:b,appointment_time:a.scheduleTime,appointment_reason:a.curruentAppointmentDetail.appointment_reason,doctor_id:a.curruentAppointmentDetail.doctor_id,is_new_customer:a.curruentAppointmentDetail.is_new_customer,patient_info:a.curruentAppointmentDetail.patient_info,rescheduled_by:"business_user"},a.appointmentBtnLoader=!0,a.appointmentBtnDisable=!0,j.rescheduleAppointment(a.resheduleData,function(c){c.success&&($(".main-container").removeClass("in"),a.curruentAppointmentDetail.appointment_date!==b?(a.showSelectDateMsg=!1,a.noAppointmentFound=!1,a.showViewAllBtn=!1,a.viewAppointment=[],a.getAppointments()):a.getPatientAppointmentByDate(),k.showToast("success",Message.getSuccessMessage("appoointmentReschedule"))),a.appointmentBtnLoader=!1,a.appointmentBtnDisable=!1,angular.element(document.querySelector("#updateAppointment")).modal("hide")},function(b){a.appointmentBtnLoader=!1,a.appointmentBtnDisable=!1,k.showToast("error",b.message)})):angular.element(document.querySelector("#updateAppointment")).modal("hide"):g.alert("Please Select schedule time.").then(function(){})}}}})},a.selectTime=function(b){a.scheduleTime=b}}])}(),!function(){"use strict";angular.module("bayaApp").controller("ManageListingController",["$scope","$state","$location","$rootScope","$stateParams","$modal","ManageListingService","UtilityService","AuthService",function(a,b,c,d,e,f,g,h,i){a.listingForm=g.ListingForm,a.listingData=[],a.listingCurrentPage=1,a.listingDetail={},a.category=[],a.statesData=[],a.categoryData=[],a.statesText={buttonDefaultText:"Select State"},a.businessCatText={buttonDefaultText:"Select Business Category"},a.listingForm.categoryHddn="",a.stateHdn="",a.listingForm.business_category=[],a.categoryArray=[],a.categoryArrayNew=[],a.userInfo=h.getUserInfo(),a.adminProfileImageSrc=baseUrl+"images/defaulthospital-logo.jpg",a.businessLogo="",a.getMyBusinessListing=function(){a.listingAvailable=!1,a.listDetailLoader=!0,a.businessLogo="",g.getMyBusinessListing({},function(c){c.success&&c.data?(a.listingDetail=c.data,a.listingDetail.notification_number=void 0===a.listingDetail.notification_number||""===a.listingDetail.notification_number?a.listingDetail.phone_number:a.listingDetail.notification_number,a.listingAvailable=!0,a.listingForm=c.data,angular.forEach(c.data.business_claim,function(b){"accepted"===b.status&&b.user_id===a.userInfo._id&&(a.editMyListing=!0)})):a.noListingAvailable=!0,a.listDetailLoader=!1,"user.editbusinessinfo"===b.current.name&&(angular.element(document.querySelector("#listingUpdateLoaderDiv")).removeClass("overlay"),a.hideListPageLoader=!0,a.stateHdn={id:c.data.state._id},angular.forEach(c.data.business_category,function(b){a.categoryArrayNew.push({id:b.cat_id._id}),a.categoryArray.push(b.cat_id._id)}),a.category=a.categoryArrayNew,a.listingForm.business_category=a.categoryArray,a.listingForm.categoryHddn=a.listingForm.business_category.length?"check":"",a.businessImageLogo=baseUrl+"uploads/listing/"+c.data.business_logo)},function(c){a.listDetailLoader=!0,h.showToast("error",c.message),"user.editbusinessinfo"===b.current.name&&a.updateListPageLoader(!1)})},("user.businessinfo"===b.current.name||"user.editbusinessinfo"===b.current.name)&&a.getMyBusinessListing(),"user.editbusinessinfo"===b.current.name&&(setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#businessInfoPage")).addClass("active")},200),i.getStateList("",function(b){angular.forEach(b.data,function(b,c){a.statesData.push({id:b._id,label:b.state_name})})},function(a){h.showToast("error",a.message)}),a.stateEvents={onItemDeselect:function(b){a.listingForm.state=""},onItemSelect:function(b){a.listingForm.state=b.id,a.stateHdn=b}},a.stateSettings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},g.getCategoryList("",function(b){angular.forEach(b.data,function(b,c){a.categoryData.push({id:b._id,label:b.category_name})})},function(a){h.showToast("error",a.message)}),a.categoryEvents={onItemDeselect:function(b){a.setCategory(),0===a.listingForm.business_category.length&&(a.listingForm.categoryHddn="")},onItemSelect:function(b){a.setCategory(),a.listingForm.categoryHddn="check"}},a.setCategory=function(){a.categoryArray=[],angular.forEach(a.category,function(b){a.categoryArray.push(b.id)}),a.listingForm.business_category=a.categoryArray},document.getElementById("businessLogoId").onchange=function(){a.file=this.value.split(".")[1],a.file=a.file.toLowerCase(),"gif"===a.file||"png"===a.file||"jpg"===a.file||"jpeg"===a.file?a.businessImageLogo=URL.createObjectURL(this.files[0]):h.showToast("error",Message.getErrorMessage("invalid_file_formate"))}),a.getDate=function(a){return h.getDate(a)},a.getBusinessCategory=function(a){var b="";return void 0!==a?a.length>0?(angular.forEach(a,function(a){b+=", "+a.cat_id.category_name}),b.replace(/^,|,$/g,"")):"-":void 0},a.fileClickEvent=function(){var a=document.getElementById("businessLogoId");setTimeout(function(){a.click()},200)},a.updateListing=function(){a.form.$valid&&(a.disableUpdateListBtn=!0,a.updateListLoader=!0,a.listingForm.listing_id=a.listingForm._id,a.userBusinessLogo=void 0!==a.businessLogo?a.businessLogo:"",g.updateListing(a.listingForm,a.userBusinessLogo,function(b){b.success?(a.userBusinessLogo="",h.showToast("success",Message.getSuccessMessage("updateBusinessInfo"))):h.showToast("error",Message.getErrorMessage("api_error")),a.disableUpdateListBtn=!1,a.updateListLoader=!1},function(b){a.disableUpdateListBtn=!1,a.updateListLoader=!1,h.showToast("error",b.message)}))}}])}(),angular.module("bayaApp").service("ManageListingService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.ListingForm={business_name:"",category:[],neighbour:"",phone_number:"",address:"",state:{},city:"",zipcode:"",notification_number:"",notification_email:"",is_notification_email:!1,is_notification_sms:!1,listing_id:"",website_name:"",about_us:""},this.saveListing=function(b,d,e){return a.post(baseUrl+"api/admin/savelisting/?access_token="+c,b).success(d).error(e)},this.getListing=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/users/get-user-listing/"+b.page+"?access_token="+c+f,b).success(d).error(e)},this.getBusinessPageListing=function(b,d,e){var f="";return void 0!==b.search&&""!==b.search&&(f+="&search="+b.search),a.get(baseUrl+"api/admin/get-patient-business-list/"+b.page+"?access_token="+c+f).success(d).error(e)},this.getListingDetail=function(b,d,e){return a.get(baseUrl+"api/users/listingdetail/"+b+"?access_token="+c).success(d).error(e)},this.deleteListing=function(b,d,e){return a["delete"](baseUrl+"api/admin/deleteListing/"+b.id+"?access_token="+c).success(d).error(e)},this.getMyBusinessListing=function(b,d,e){return a.get(baseUrl+"api/users/get-my-listing?access_token="+c).success(d).error(e)},this.getCategoryList=function(b,d,e){return a.get(baseUrl+"api/public/getcategory?access_token="+c).success(d).error(e)},this.updateListing=function(b,d,e,f){if(""!==d&&void 0!==d){var g=new FormData;return g.append("listing_id",b.listing_id),g.append("business_name",b.business_name),b.business_category.forEach(function(a){g.append("business_category[]",a)}),g.append("neighbour",b.neighbour),g.append("phone_number",b.phone_number),g.append("address",b.address),g.append("website_name",void 0!==b.website_name&&""!==b.website_name?b.website_name:""),g.append("state",b.state._id),g.append("city",b.city),g.append("zipcode",b.zipcode),g.append("notification_number",b.notification_number),g.append("notification_email",b.notification_email),g.append("is_notification_email",b.is_notification_email),g.append("is_notification_sms",b.is_notification_sms),g.append("about_us",void 0!==b.about_us&&""!==b.about_us?b.about_us:""),g.append("business_logo",d),a.post(baseUrl+"api/users/updatelisting?access_token="+c,g,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(e).error(f)}var h={listing_id:b._id,business_name:b.business_name,business_category:b.business_category,neighbour:b.neighbour,phone_number:b.phone_number,address:b.address,website_name:b.website_name,state:b.state,city:b.city,zipcode:b.zipcode,notification_number:b.notification_number,notification_email:b.notification_email,is_notification_email:b.is_notification_email,is_notification_sms:b.is_notification_sms,about_us:b.about_us};return a.post(baseUrl+"api/users/updatelisting?access_token="+c,h).success(e).error(f)}}]),!function(){"use strict";angular.module("bayaApp").controller("ManageDoctorsController",["$scope","$state","$injector","$location","$rootScope","$modal","$ngBootbox","$stateParams","ManageDoctorsService","UtilityService",function(a,b,c,d,e,f,g,h,i,j){a.doctorForm=i.DoctorFormForm,a.doctorForm={},a.speciality=[],a.specialityData=[],a.specialityArray=[],a.specialityText={buttonDefaultText:"Select Speciality:"},a.doctorForm.specialityHddn="",a.doctorForm.speciality=[],a.myBusinessInfo=j.getLocalStorage("myBusiness"),a.doctorProfileImageSrc=baseUrl+"images/default-profileimage.jpg",a.myBusinessInfo=j.getLocalStorage("myBusiness"),a.doctorData=[],setTimeout(function(){angular.element(document.querySelector(".leftTab")).removeClass("active"),angular.element(document.querySelector("#doctorlist")).addClass("active")},200),("user.adddoctor"===b.current.name||"user.updatedoctor"===b.current.name)&&(i.getCategoryList("",function(b){angular.forEach(b.data,function(b,c){a.specialityData.push({id:b._id,label:b.category_name})})},function(a){j.showToast("error",a.message)}),a.specialityEvents={onItemDeselect:function(b){a.setSpeciality(),0===a.doctorForm.speciality.length&&(a.doctorForm.specialityHddn="")},onItemSelect:function(b){a.setSpeciality(),a.doctorForm.specialityHddn="check"}},a.multiSelectSettings={selectionLimit:0,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:3,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},a.setSpeciality=function(){a.specialityArray=[],angular.forEach(a.speciality,function(b){a.specialityArray.push(b.id)}),a.doctorForm.speciality=a.specialityArray},document.getElementById("doctorProfileImgId").onchange=function(){a.file=this.value.split(".")[1],a.file=a.file.toLowerCase(),"gif"===a.file||"png"===a.file||"jpg"===a.file||"jpeg"===a.file?a.doctorProfileImageSrc=URL.createObjectURL(this.files[0]):j.showToast("error",Message.getErrorMessage("invalid_file_formate"))}),a.fileClickEvent=function(){var a=document.getElementById("doctorProfileImgId");setTimeout(function(){a.click()},200)},a.saveDoctor=function(){a.form.$valid&&(a.doctorForm.listing_id=a.myBusinessInfo._id,a.doctorForm.image=void 0!==a.doctorImage?a.doctorImage:"",a.doctorForm.doctor_id=""!==h.id&&void 0!==h.id?h.id:"","user.updatedoctor"===b.current.name&&a.setSpeciality(),i.saveDoctors(a.doctorForm,function(c){c.success?(a.doctorForm={},a.doctorProfileImageSrc="",j.showToast("success",Message.getSuccessMessage("doctor_save_success")),b.go("user.doctorlist")):j.showToast("error",Message.getErrorMessage("api_error"))},function(a){j.showToast("error",a.message)}))},a.getDoctorList=function(){a.doctorListLoader=!0,a.noDoctorListFound=!1,a.doctorData=[],i.getDoctorList({id:a.myBusinessInfo._id,search:a.searchVal},function(b){b.success&&b.data.length?a.doctorData=b.data:a.noDoctorListFound=!0,a.doctorListLoader=!1},function(b){a.doctorListLoader=!1,a.noDoctorListFound=!0})},"user.doctorlist"===b.current.name&&""!==a.myBusinessInfo&&void 0!==a.myBusinessInfo&&a.myBusinessInfo!==!1?(a.hideDoctorAddBtn=!1,a.getDoctorList()):a.hideDoctorAddBtn=!0,a.getBusinessCategory=function(a){var b="";return void 0!==a?a.length>0?(angular.forEach(a,function(a){b+=", "+a.cat_id.category_name}),b.replace(/^,|,$/g,"")):"-":void 0},a.deleteDoctor=function(b,c){g.hideAll(),g.customDialog({message:Message.getAlertMessage("doctor_delete"),className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){i.deleteDoctor({doctor_id:b,listing_id:a.myBusinessInfo._id},function(b){b.success?(a.doctorData.splice(c,1),0===a.doctorData.length&&(a.noDoctorListFound=!0),j.showToast("success",Message.getSuccessMessage("doctor_delete"))):j.showToast("error",Message.getErrorMessage("api_error"))},function(a){j.showToast("error",Message.getErrorMessage("api_error"))})}}}})},"user.updatedoctor"===b.current.name&&(a.specialityArray=[],angular.element(document.querySelector("#doctorProfileLoaderDiv")).addClass("overlay"),a.hidePageLoader=!0,i.getDoctorDetail({listing_id:a.myBusinessInfo._id,doctor_id:h.id},function(c){c.success&&c.data?(a.doctorForm=c.data,a.doctorProfileImageSrc="uploads/profile/"+c.data.image,
angular.forEach(c.data.speciality,function(b){a.specialityArray.push({id:b.cat_id})}),a.speciality=a.specialityArray,a.doctorForm.specialityHddn="check"):b.go("user.doctorlist"),angular.element(document.querySelector("#doctorProfileLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1},function(c){b.go("user.doctorlist"),angular.element(document.querySelector("#doctorProfileLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1}))}])}(),angular.module("bayaApp").service("ManageDoctorsService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.DoctorFormForm={name:"",speciality:[],description:""},this.getCategoryList=function(b,d,e){return a.get(baseUrl+"api/admin/getcategory?access_token="+c).success(d).error(e)},this.saveDoctors=function(b,d,e){var f=new FormData;return f.append("listing_id",b.listing_id),f.append("name",b.name),b.speciality.forEach(function(a){f.append("speciality[]",a)}),f.append("doctor_id",b.doctor_id),f.append("description",b.description),f.append("image",b.image),a.post(baseUrl+"api/users/add-doctor-to-list?access_token="+c,f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(d).error(e)},this.getDoctorList=function(b,d,e){var f=void 0!==b.search&&""!==b.search?"&search="+b.search:"";return a.get(baseUrl+"api/users/get-listing-doctors/"+b.id+"?access_token="+c+f).success(d).error(e)},this.deleteDoctor=function(b,d,e){return a.get(baseUrl+"api/users/delete-doctor/"+b.doctor_id+"/listing/"+b.listing_id+"?access_token="+c).success(d).error(e)},this.getDoctorDetail=function(b,d,e){return a.get(baseUrl+"api/users/get-doctor-detail/"+b.doctor_id+"/listing/"+b.listing_id+"?access_token="+c).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("UserDashboardController",["$scope","$state","$injector","$location","$rootScope","$modal","$timeout","$ngBootbox","UserDashboardService","UtilityService",function(a,b,c,d,e,f,g,h,i,j){g(function(){a.business_name=a.myBusinessInfo.business_name,a.showCompleteProfile=100===a.percentage?!1:!0},200),a.offset=0,a.timerCurrent=0,a.uploadCurrent=0,a.stroke=25,a.radius=120,a.isSemi=!1,a.rounded=!1,a.responsive=!1,a.clockwise=!0,a.currentColor="#9B59B2",a.bgColor="#eaeaea",a.duration=800,a.currentAnimation="easeOutCubic";var k=j.getUserInfo();a.userDashboardDetail={},a.getColor=function(){return a.gradient?"url(#gradient)":a.currentColor};a.getDoctorName=function(b){var c="-";return""!==b&&void 0!==b&&""!==a.myBusinessInfo&&a.myBusinessInfo!==!1&&angular.forEach(a.myBusinessInfo.doctors,function(a){a._id===b&&(c=a.name)}),c},a.getUserDashboardDetail=function(){a.claimProfile=!1,a.pendingClaimProfile=!1,a.confirmClaimProfile=!1,a.businessAppointment=[],i.getUserDashboardDetail({},function(b){if(b.success)if(j.setLocalStorage("myBusiness",b.data.my_listing),a.myBusinessInfo=b.data.my_listing,a.current=b.data.profile_percentage.percentVal,a.max=b.data.profile_percentage.total,a.percentage=b.data.profile_percentage.percent,a.businessAppointment=b.data.pending_appointment,b.data.my_listing)if(b.data.my_listing_claim){var c=b.data.my_listing_claim;g(function(){a.hideTab="accepted"===c.status&&c.user_id===k._id?!1:!0,"pending"===c.status&&c.user_id===k._id&&(a.claimProfile=!1,a.pendingClaimProfile=!0,a.confirmClaimProfile=!1),"accepted"===c.status&&c.user_id===k._id&&(a.claimProfile=!1,a.pendingClaimProfile=!1,a.confirmClaimProfile=!0,a.business_name=b.data.my_listing.business_name)},200)}else a.claimProfile=!0;else a.claimProfile=!0},function(a){})},a.getUserDashboardDetail(),a.acceptAppointment=function(b,c){h.hideAll();var d="accepted"===c?"accept":"reject";h.customDialog({message:"Are you sure you want to "+d+" this appointment ?",className:"test-class",buttons:{warning:{label:"No",className:"btn-default",callback:function(){}},success:{label:"Yes",className:"btn-primary",callback:function(){i.changeAppointmentStatus({id:b,status:c},function(b){if(b.success){a.hideAcceptBtn=!0,"accepted"===c?a.appointmentAccepted=!0:a.appointmentRejected=!0;var d="Appointment successfully "+c+".";j.showToast("success",d),a.getUserDashboardDetail()}else j.showToast("error",Message.getErrorMessage("api_error"))},function(a){j.showToast("error",Message.getErrorMessage("api_error"))})}}}})}}])}(),angular.module("bayaApp").service("UserDashboardService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.getUserDashboardDetail=function(b,d,e){return a.get(baseUrl+"api/users/dashboard?access_token="+c).success(d).error(e)},this.changeAppointmentStatus=function(b,d,e){return a.get(baseUrl+"api/users/change-appointment-status/"+b.id+"/status/"+b.status+"?access_token="+c).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("BusinessHourController",["$scope","$state","$injector","$location","$rootScope","$modal","$ngBootbox","$stateParams","ManageBusinessHourService","UtilityService","CommonUtility",function(a,b,c,d,e,f,g,h,i,j,k){a.myBusinessInfo=j.getLocalStorage("myBusiness"),a.timeSlot=30,a.availabilityData=[],a.optionsData=k.getBusinessHours(),angular.element(document.querySelector("#businessHourLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1,a.mondayAvailabilityId="",a.tuesdayAvailabilityId="",a.wednesdayAvailabilityId="",a.thursdayAvailabilityId="",a.fridayAvailabilityId="",a.saturdayAvailabilityId="",a.sundayAvailabilityId="",a.settings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},a.mondayFrom={},a.mondayFromText={buttonDefaultText:"Select Time"},a.mondayTo={},a.mondayToText={buttonDefaultText:"Select Time"},a.mondayFromVal="",a.mondayToVal="",a.mondayError=!1,a.mondayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.mondayFromVal&&a.mondayFromVal!==b?(a.mondayFromVal=b,a.mondayFrom=b):(a.mondayFrom={},a.mondayFromVal=""),(void 0!==a.mondayFrom.id&&void 0===a.mondayTo.id||void 0===a.mondayFrom.id&&void 0!==a.mondayTo.id)&&(a.mondayError=!0),(void 0===a.mondayFrom.id&&void 0===a.mondayTo.id||void 0!==a.mondayFrom.id&&void 0!==a.mondayTo.id)&&(a.mondayError=!1)}},a.mondayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.mondayToVal&&a.mondayToVal!==b?(a.mondayToVal=b,a.mondayTo=b):(a.mondayTo={},a.mondayToVal=""),(void 0!==a.mondayFrom.id&&void 0===a.mondayTo.id||void 0===a.mondayFrom.id&&void 0!==a.mondayTo.id)&&(a.mondayError=!0),(void 0===a.mondayFrom.id&&void 0===a.mondayTo.id||void 0!==a.mondayFrom.id&&void 0!==a.mondayTo.id)&&(a.mondayError=!1)}},a.tuesdayFrom={},a.tuesdayFromText={buttonDefaultText:"Select Time"},a.tuesdayTo={},a.tuesdayToText={buttonDefaultText:"Select Time"},a.tuesdayFromVal="",a.tuesdayToVal="",a.tuesdayError=!1,a.tuesdayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.tuesdayFromVal&&a.tuesdayFromVal!==b?(a.tuesdayFromVal=b,a.tuesdayFrom=b):(a.tuesdayFrom={},a.tuesdayFromVal=""),(void 0!==a.tuesdayFrom.id&&void 0===a.tuesdayTo.id||void 0===a.tuesdayFrom.id&&void 0!==a.tuesdayTo.id)&&(a.tuesdayError=!0),(void 0===a.tuesdayFrom.id&&void 0===a.tuesdayTo.id||void 0!==a.tuesdayFrom.id&&void 0!==a.tuesdayTo.id)&&(a.tuesdayError=!1)}},a.tuesdayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.tuesdayToVal&&a.tuesdayToVal!==b?(a.tuesdayToVal=b,a.tuesdayTo=b):(a.tuesdayTo={},a.tuesdayToVal=""),(void 0!==a.tuesdayFrom.id&&void 0===a.tuesdayTo.id||void 0===a.tuesdayFrom.id&&void 0!==a.tuesdayTo.id)&&(a.tuesdayError=!0),(void 0===a.tuesdayFrom.id&&void 0===a.tuesdayTo.id||void 0!==a.tuesdayFrom.id&&void 0!==a.tuesdayTo.id)&&(a.tuesdayError=!1)}},a.wednesdayFrom={},a.wednesdayFromText={buttonDefaultText:"Select Time"},a.wednesdayTo={},a.wednesdayToText={buttonDefaultText:"Select Time"},a.wednesdayFromVal="",a.wednesdayToVal="",a.wednesdayError=!1,a.wednesdayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.wednesdayFromVal&&a.wednesdayFromVal!==b?(a.wednesdayFromVal=b,a.wednesdayFrom=b):(a.wednesdayFrom={},a.wednesdayFromVal=""),(void 0!==a.wednesdayFrom.id&&void 0===a.wednesdayTo.id||void 0===a.wednesdayFrom.id&&void 0!==a.wednesdayTo.id)&&(a.wednesdayError=!0),(void 0===a.wednesdayFrom.id&&void 0===a.wednesdayTo.id||void 0!==a.wednesdayFrom.id&&void 0!==a.wednesdayTo.id)&&(a.wednesdayError=!1)}},a.wednesdayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.wednesdayToVal&&a.wednesdayToVal!==b?(a.wednesdayToVal=b,a.wednesdayTo=b):(a.wednesdayTo={},a.wednesdayToVal=""),(void 0!==a.wednesdayFrom.id&&void 0===a.wednesdayTo.id||void 0===a.wednesdayFrom.id&&void 0!==a.wednesdayTo.id)&&(a.wednesdayError=!0),(void 0===a.wednesdayFrom.id&&void 0===a.wednesdayTo.id||void 0!==a.wednesdayFrom.id&&void 0!==a.wednesdayTo.id)&&(a.wednesdayError=!1)}},a.thursdayFrom={},a.thursdayFromText={buttonDefaultText:"Select Time"},a.thursdayTo={},a.thursdayToText={buttonDefaultText:"Select Time"},a.thursdayFromVal="",a.thursdayToVal="",a.thursdayError=!1,a.thursdayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.thursdayFromVal&&a.thursdayFromVal!==b?(a.thursdayFromVal=b,a.thursdayFrom=b):(a.thursdayFrom={},a.thursdayFromVal=""),(void 0!==a.thursdayFrom.id&&void 0===a.thursdayTo.id||void 0===a.thursdayFrom.id&&void 0!==a.thursdayTo.id)&&(a.thursdayError=!0),(void 0===a.thursdayFrom.id&&void 0===a.thursdayTo.id||void 0!==a.thursdayFrom.id&&void 0!==a.thursdayTo.id)&&(a.thursdayError=!1)}},a.thursdayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.thursdayToVal&&a.thursdayToVal!==b?(a.thursdayToVal=b,a.thursdayTo=b):(a.thursdayTo={},a.thursdayToVal=""),(void 0!==a.thursdayFrom.id&&void 0===a.thursdayTo.id||void 0===a.thursdayFrom.id&&void 0!==a.thursdayTo.id)&&(a.thursdayError=!0),(void 0===a.thursdayFrom.id&&void 0===a.thursdayTo.id||void 0!==a.thursdayFrom.id&&void 0!==a.thursdayTo.id)&&(a.thursdayError=!1)}},a.fridayFrom={},a.fridayFromText={buttonDefaultText:"Select Time"},a.fridayTo={},a.fridayToText={buttonDefaultText:"Select Time"},a.fridayFromVal="",a.fridayToVal="",a.fridayError=!1,a.fridayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.fridayFromVal&&a.fridayFromVal!==b?(a.fridayFromVal=b,a.fridayFrom=b):(a.fridayFrom={},a.fridayFromVal=""),(void 0!==a.fridayFrom.id&&void 0===a.fridayTo.id||void 0===a.fridayFrom.id&&void 0!==a.fridayTo.id)&&(a.fridayError=!0),(void 0===a.fridayFrom.id&&void 0===a.fridayTo.id||void 0!==a.fridayFrom.id&&void 0!==a.fridayTo.id)&&(a.fridayError=!1)}},a.fridayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.fridayToVal&&a.fridayToVal!==b?(a.fridayToVal=b,a.fridayTo=b):(a.fridayTo={},a.fridayToVal=""),(void 0!==a.fridayFrom.id&&void 0===a.fridayTo.id||void 0===a.fridayFrom.id&&void 0!==a.fridayTo.id)&&(a.fridayError=!0),(void 0===a.fridayFrom.id&&void 0===a.fridayTo.id||void 0!==a.fridayFrom.id&&void 0!==a.fridayTo.id)&&(a.fridayError=!1)}},a.saturdayFrom={},a.saturdayFromText={buttonDefaultText:"Select Time"},a.saturdayTo={},a.saturdayToText={buttonDefaultText:"Select Time"},a.saturdayFromVal="",a.saturdayToVal="",a.saturdayError=!1,a.saturdayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.saturdayFromVal&&a.saturdayFromVal!==b?(a.saturdayFromVal=b,a.saturdayFrom=b):(a.saturdayFrom={},a.saturdayFromVal=""),(void 0!==a.saturdayFrom.id&&void 0===a.saturdayTo.id||void 0===a.saturdayFrom.id&&void 0!==a.saturdayTo.id)&&(a.saturdayError=!0),(void 0===a.saturdayFrom.id&&void 0===a.saturdayTo.id||void 0!==a.saturdayFrom.id&&void 0!==a.saturdayTo.id)&&(a.saturdayError=!1)}},a.saturdayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.saturdayToVal&&a.saturdayToVal!==b?(a.saturdayToVal=b,a.saturdayTo=b):(a.saturdayTo={},a.saturdayToVal=""),(void 0!==a.saturdayFrom.id&&void 0===a.saturdayTo.id||void 0===a.saturdayFrom.id&&void 0!==a.saturdayTo.id)&&(a.saturdayError=!0),(void 0===a.saturdayFrom.id&&void 0===a.saturdayTo.id||void 0!==a.saturdayFrom.id&&void 0!==a.saturdayTo.id)&&(a.saturdayError=!1)}},a.sundayFrom={},a.sundayFromText={buttonDefaultText:"Select Time"},a.sundayTo={},a.sundayToText={buttonDefaultText:"Select Time"},a.sundayFromVal="",a.sundayToVal="",a.sundayError=!1,a.sundayFromEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.sundayFromVal&&a.sundayFromVal!==b?(a.sundayFromVal=b,a.sundayFrom=b):(a.sundayFrom={},a.sundayFromVal=""),(void 0!==a.sundayFrom.id&&void 0===a.sundayTo.id||void 0===a.sundayFrom.id&&void 0!==a.sundayTo.id)&&(a.sundayError=!0),(void 0===a.sundayFrom.id&&void 0===a.sundayTo.id||void 0!==a.sundayFrom.id&&void 0!==a.sundayTo.id)&&(a.sundayError=!1)}},a.sundayToEvents={onItemDeselect:function(a){},onItemSelect:function(b){""===a.sundayToVal&&a.sundayToVal!==b?(a.sundayToVal=b,a.sundayTo=b):(a.sundayTo={},a.sundayToVal=""),(void 0!==a.sundayFrom.id&&void 0===a.sundayTo.id||void 0===a.sundayFrom.id&&void 0!==a.sundayTo.id)&&(a.sundayError=!0),(void 0===a.sundayFrom.id&&void 0===a.sundayTo.id||void 0!==a.sundayFrom.id&&void 0!==a.sundayTo.id)&&(a.sundayError=!1)}},a.mondayEnabled=!1,a.tuesdayEnabled=!1,a.wednesdayEnabled=!1,a.thursdayEnabled=!1,a.fridayEnabled=!1,a.saturdayEnabled=!1,a.sundayEnabled=!1,a.saveBusinessHour=function(){a.availabilityArray={},a.availabilityArray={availability_slot:a.timeSlot,listing_id:a.myBusinessInfo._id},a.availabilityArray.availability=[],void 0!==a.mondayFrom.id&&void 0!==a.mondayTo.id&&(a.mondayObj={availability_day:"Monday",availability_status:a.mondayEnabled?"yes":"no",availability_from:a.mondayFrom.id,availability_to:a.mondayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.mondayAvailabilityId&&(a.mondayObj._id=a.mondayAvailabilityId),a.availabilityArray.availability.push(a.mondayObj)),void 0!==a.tuesdayFrom.id&&void 0!==a.tuesdayTo.id&&(a.tuesdayObj={availability_day:"Tuesday",availability_status:a.tuesdayEnabled?"yes":"no",availability_from:a.tuesdayFrom.id,availability_to:a.tuesdayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.tuesdayAvailabilityId&&(a.tuesdayObj._id=a.tuesdayAvailabilityId),a.availabilityArray.availability.push(a.tuesdayObj)),void 0!==a.wednesdayFrom.id&&void 0!==a.wednesdayTo.id&&(a.wednesdayObj={availability_day:"Wednesday",availability_status:a.wednesdayEnabled?"yes":"no",availability_from:a.wednesdayFrom.id,availability_to:a.wednesdayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.wednesdayAvailabilityId&&(a.wednesdayObj._id=a.wednesdayAvailabilityId),a.availabilityArray.availability.push(a.wednesdayObj)),void 0!==a.thursdayFrom.id&&void 0!==a.thursdayTo.id&&(a.thursdayObj={availability_day:"Thursday",availability_status:a.thursdayEnabled?"yes":"no",availability_from:a.thursdayFrom.id,availability_to:a.thursdayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.thursdayAvailabilityId&&(a.thursdayObj._id=a.thursdayAvailabilityId),a.availabilityArray.availability.push(a.thursdayObj)),void 0!==a.fridayFrom.id&&void 0!==a.fridayTo.id&&(a.fridayObj={availability_day:"Friday",availability_status:a.fridayEnabled?"yes":"no",availability_from:a.fridayFrom.id,availability_to:a.fridayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.fridayAvailabilityId&&(a.fridayObj._id=a.fridayAvailabilityId),a.availabilityArray.availability.push(a.fridayObj)),void 0!==a.saturdayFrom.id&&void 0!==a.saturdayTo.id&&(a.saturdayObj={availability_day:"Saturday",availability_status:a.saturdayEnabled?"yes":"no",availability_from:a.saturdayFrom.id,availability_to:a.saturdayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.saturdayAvailabilityId&&(a.saturdayObj._id=a.saturdayAvailabilityId),a.availabilityArray.availability.push(a.saturdayObj)),void 0!==a.sundayFrom.id&&void 0!==a.sundayTo.id&&(a.sundayObj={availability_day:"Sunday",availability_status:a.sundayEnabled?"yes":"no",availability_from:a.sundayFrom.id,availability_to:a.sundayTo.id,availability_schedule_from:"AM",availability_schedule_to:"PM"},""!==a.sundayAvailabilityId&&(a.sundayObj._id=a.sundayAvailabilityId),a.availabilityArray.availability.push(a.sundayObj)),a.mondayError||a.tuesdayError||a.wednesdayError||a.thursdayError||a.fridayError||a.saturdayError||a.sundayError||void 0===a.mondayFrom.id||void 0===a.mondayTo.id||void 0===a.tuesdayFrom.id||void 0===a.tuesdayTo.id||void 0===a.wednesdayFrom.id||void 0===a.wednesdayTo.id||void 0===a.thursdayFrom.id||void 0===a.thursdayTo.id||void 0===a.fridayFrom.id||void 0===a.fridayTo.id||void 0===a.saturdayFrom.id||void 0===a.saturdayTo.id||void 0===a.sundayFrom.id||void 0===a.sundayTo.id?g.alert("Please select business hours.").then(function(){}):(a.addBusinessHoursLoader=!0,a.businessHoursBtnDisable=!0,i.addBusinessHours(a.availabilityArray,function(b){b.success?(e.userDashboard(),j.showToast("success",Message.getSuccessMessage("submit_availability"))):j.showToast("error",Message.getErrorMessage("api_error")),a.businessHoursBtnDisable=!1,a.addBusinessHoursLoader=!1},function(b){a.businessHoursBtnDisable=!1,a.addBusinessHoursLoader=!1,j.showToast("error",Message.getErrorMessage("api_error"))}))},a.getBusinessHours=function(){angular.element(document.querySelector("#businessHourLoaderDiv")).addClass("overlay"),a.hidePageLoader=!0,a.mondayAvailabilityId="",a.tuesdayAvailabilityId="",a.wednesdayAvailabilityId="",a.thursdayAvailabilityId="",a.fridayAvailabilityId="",a.saturdayAvailabilityId="",a.sundayAvailabilityId="",i.getBusinessHours(a.myBusinessInfo._id,function(c){c.success&&c.data.listing_detail?c.data.listing_detail.availability&&(a.timeSlot=c.data.listing_detail.availability.availability_slot,c.data.listing_detail.availability.availability.length&&angular.forEach(c.data.listing_detail.availability.availability,function(b){switch(b.availability_day){case"Monday":a.mondayAvailabilityId=b._id,a.mondayFrom={id:b.availability_from},a.mondayTo={id:b.availability_to},a.mondayFromVal={id:b.availability_from},a.mondayToVal={id:b.availability_to},a.mondayEnabled="yes"===b.availability_status?!0:!1;break;case"Tuesday":a.tuesdayAvailabilityId=b._id,a.tuesdayFrom={id:b.availability_from},a.tuesdayTo={id:b.availability_to},a.tuesdayFromVal={id:b.availability_from},a.tuesdayToVal={id:b.availability_to},a.tuesdayEnabled="yes"===b.availability_status?!0:!1;break;case"Wednesday":a.wednesdayAvailabilityId=b._id,a.wednesdayFrom={id:b.availability_from},a.wednesdayTo={id:b.availability_to},a.wednesdayFromVal={id:b.availability_from},a.wednesdayToVal={id:b.availability_to},a.wednesdayEnabled="yes"===b.availability_status?!0:!1;break;case"Thursday":a.thursdayAvailabilityId=b._id,a.thursdayFrom={id:b.availability_from},a.thursdayTo={id:b.availability_to},a.thursdayFromVal={id:b.availability_from},a.thursdayToVal={id:b.availability_to},a.thursdayEnabled="yes"===b.availability_status?!0:!1;break;case"Friday":a.fridayAvailabilityId=b._id,a.fridayFrom={id:b.availability_from},a.fridayTo={id:b.availability_to},a.fridayFromVal={id:b.availability_from},a.fridayToVal={id:b.availability_to},a.fridayEnabled="yes"===b.availability_status?!0:!1;break;case"Saturday":a.saturdayAvailabilityId=b._id,a.saturdayFrom={id:b.availability_from},a.saturdayTo={id:b.availability_to},a.saturdayFromVal={id:b.availability_from},a.saturdayToVal={id:b.availability_to},a.saturdayEnabled="yes"===b.availability_status?!0:!1;break;case"Sunday":a.sundayAvailabilityId=b._id,a.sundayFrom={id:b.availability_from},a.sundayTo={id:b.availability_to},a.sundayFromVal={id:b.availability_from},a.sundayToVal={id:b.availability_to},a.sundayEnabled="yes"===b.availability_status?!0:!1}})):b.go("user.dashboard"),angular.element(document.querySelector("#businessHourLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1},function(c){angular.element(document.querySelector("#businessHourLoaderDiv")).removeClass("overlay"),a.hidePageLoader=!1,b.go("user.dashboard"),j.showToast("error",Message.getErrorMessage("api_error"))})},a.getBusinessHours()}])}(),angular.module("bayaApp").service("ManageBusinessHourService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.addBusinessHours=function(b,d,e){return a.post(baseUrl+"api/users/add-business-hour-to-list?access_token="+c,b).success(d).error(e)},this.getBusinessHours=function(b,d,e){return a.get(baseUrl+"api/users/listingdetail/"+b+"?access_token="+c).success(d).error(e)}}]),!function(){"use strict";angular.module("bayaApp").controller("AppointmentReportController",["$scope","$state","$injector","$location","$rootScope","$timeout","AppointmentReportService","UtilityService","CommonUtility",function(a,b,c,d,e,f,g,h,i){a.patientData=[],a.patient=[],a.patientId=[],a.status={},a.statusVal="",a.reportData=[],a.reportCurrentPage=1,a.usersText={buttonDefaultText:"Select Patient"},a.statusText={buttonDefaultText:"Select Status"},a.usersEvent={onItemDeselect:function(a){},onItemSelect:function(a){}},a.multiSelectSettings={selectionLimit:0,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:3,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},g.getPatientList({type:"patient"},function(b){angular.forEach(b.data,function(b,c){a.patientData.push({id:b._id,label:b.first_name+" "+b.last_name})})},function(a){h.showToast("error",a.message)}),a.statusData=i.getReportStatus(),a.statusEvents={onItemDeselect:function(b){a.status={}},onItemSelect:function(b){""===a.statusVal&&a.statusVal!==b?(a.statusVal=b,a.status=b):(a.status={},a.statusVal="")}},a.statusSettings={selectionLimit:1,scrollable:!0,scrollableHeight:"150px",smartButtonMaxItems:1,closeOnSelect:!0,closeOnDeselect:!0,showCheckAll:!1,showUncheckAll:!1,smartButtonTextConverter:function(a,b){return a}},a.today=function(){a.fromDate=new Date},a.clear=function(){a.fromDate=null},a.toggleMin=function(){},a.toggleMin(),a.fromOpen=function(b){b.preventDefault(),b.stopPropagation(),void 0!==a.toDate&&(a.fromMaxDate=a.toDate),a.fromOpened=!a.fromOpened},a.toOpen=function(b){b.preventDefault(),b.stopPropagation(),void 0!==a.fromDate&&(a.toMinDate=a.fromDate),a.toOpened=!a.toOpened},a.dateOptions={showWeeks:!1,showClose:!1},a.formats=["dd-MMMM-yyyy","dd/MM/yyyy","MM/dd/yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[2],a.getAppointmentReportList=function(){a.reportListLoader=!0,a.noReportListFound=!1,a.reportData=[],a.patientId=[],angular.forEach(a.patient,function(b){a.patientId.push(b.id)}),a.appointment_from=void 0!==a.fromDate?a.fromDate:"",a.appointment_to=void 0!==a.toDate?a.toDate:"",a.appointment_status=void 0!==a.status.id&&""!==a.status.id?a.status.id:"",g.getAppointmentReportList({page:a.reportCurrentPage,patient_id:a.patientId,appointment_status:a.appointment_status,appointment_from:a.appointment_from,appointment_to:a.appointment_to},function(b){b.success&&b.data.items.length?(a.reportData=b.data.items,a.reportListMaxSize=b.data.page,a.reportListTotalItems=b.data.totalItems,a.reportListPagination=b.data.page>1?!0:!1):(a.reportListPagination=!1,a.noReportListFound=!0),a.reportListLoader=!1},function(b){a.reportListLoader=!1,a.noReportListFound=!0})},a.getAppointmentReportList(),a.getDate=function(a){return h.getDate(a)},a.selectFromDate=function(a){console.log(a)},a.selectToDate=function(a){}}])}(),angular.module("bayaApp").service("AppointmentReportService",["$http","UtilityService",function(a,b){var c=b.getUserAccessToken();this.userProfileForm={first_name:"",last_name:"",email:"",phone_number:"",address:"",state:"",city:"",user_image:"",_id:""},this.getPatientList=function(b,d,e){return a.get(baseUrl+"api/users/get-users-by-type/"+b.type+"?access_token="+c).success(d).error(e)},this.getAppointmentReportList=function(b,d,e){return a.post(baseUrl+"api/users/get-appointment-report/"+b.page+"?access_token="+c,b).success(d).error(e)}}]);